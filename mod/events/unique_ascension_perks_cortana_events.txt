namespace = CortanaEvent
# Cortana Research - Main Menu (on_monthly_pulse_country)
country_event = {
	id = CortanaEvent.0
	title = "CortanaEvent.0.Name"
	desc = "CortanaEvent.0.Desc"
	picture = GFX_evt_ai_cortana
	show_sound = event_scanner
	is_triggered_only = yes
	# mean_time_to_happen = { days = 25 }
	trigger = {
		# is_ai = no
		has_ascension_perk = ap_ai_cortana
		NOR = {
			has_country_flag = cortana_ready
			has_country_flag = cortana_cooldown
		}
	}
	immediate = {
		set_country_flag = cortana_ready
		if = { limit = { has_country_flag = cortana_bi_ready }
			remove_country_flag = cortana_bi_ready
			if = { limit = { has_technology = tech_cortana_initiatives }
				# Cortana Research
				if = { limit = { is_ai = no }
					if = { limit = { has_technology = tech_cortana_advanced }
						country_event = { id = CortanaEvent.13 days = 9 random = 9 }
					} else = {
						random = { chance = 50 country_event = { id = CortanaEvent.13 days = 50 } }
					}
				}
			}
			if = { limit = { has_technology = tech_cortana_help }
				if = { limit = { is_ai = no } # Cortana Research
					if = { limit = { has_technology = tech_cortana_advanced }
						country_event = { id = CortanaEvent.15 days = 9 random = 9 }
					} else = {
						random = { chance = 50 country_event = { id = CortanaEvent.15 days = 50 } }
					}
				}
				if = { # Get Relic
					limit = {
						has_technology = tech_cortana_initiatives
						has_technology = tech_cortana_optimized
						has_technology = tech_cortana_help
						has_technology = tech_cortana_advanced
						has_technology = tech_cortana_perfect
						NOT = { has_country_flag = has_cortana_relic }
					}
					random = { chance = 75 country_event = { id = CortanaEvent.20 days = 15 } }
				}
			}
		} else = {
			set_country_flag = cortana_bi_ready
		}
	}
	option = {
		name = OK
		ai_chance = { factor = 0.1 }
		hidden_effect = { remove_country_flag = cortana_ready }
	}
	option = {
		name = "CortanaEvent.0.a"
		allow = {
			OR = {
				AND = { NOT = { has_technology = tech_cortana_optimized } resource_stockpile_compare = { resource = energy value > 5000 } }
				AND = { has_technology = tech_cortana_optimized resource_stockpile_compare = { resource = energy value > 4000 } }
			}
		}
		hidden_effect = {
			if = { limit = { has_technology = tech_cortana_optimized } add_resource = { energy = 1000 } }
			add_resource = { energy = -5000 }
			country_event = { id = CortanaEvent.1 }
		}
	}
	option = {
		name = "CortanaEvent.0.b"
		ai_chance = { factor = 0.1 }
		default_hide_option = yes
		hidden_effect = { set_country_flag = cortana_ready }
	}
}

# Cortana Research - Main Menu
country_event = {
	id = CortanaEvent.1
	title = "CortanaEvent.1.Name"
	desc = "CortanaEvent.1.Desc"
	picture = GFX_evt_ai_cortana
	show_sound = event_scanner
	is_triggered_only = yes
	trigger = { NOT = { has_country_flag = cortana_cooldown } }
	immediate = { set_country_flag = cortana_ready }
	after = { remove_country_flag = cortana_ready }
	option = {
		name = "CortanaEvent.1.Building"
		trigger = {
			# NOT = { has_country_flag = cortana_cooldown }
		}
		hidden_effect = {
			country_event = { id = CortanaEvent.2 }
		}
	}
	option = {
		name = "CortanaEvent.1.Module"
		trigger = {
			# cortana_can_modules_techs = yes
			# NOT = { has_country_flag = cortana_cooldown }
			NAND = {
				has_technology = tech_reactor_boosters_3
				has_technology = tech_afterburners_2
				has_technology = tech_hyper_drive_3
				has_technology = tech_thrusters_4
				has_technology = tech_sensors_4
				has_technology = tech_ship_armor_5
				has_technology = tech_shield_rechargers_1
				has_technology = tech_shields_5
				has_technology = tech_zero_point_power
			}
		}
		hidden_effect = {
			country_event = { id = CortanaEvent.3 }
		}
	}
	option = {
		name = "CortanaEvent.1.Weapon"
		trigger = {
			# cortana_can_weapons_techs = yes
			# NOT = { has_country_flag = cortana_cooldown }
			NAND = {
				has_technology = tech_strike_craft_3
				has_technology = tech_disruptors_3
				has_technology = tech_energy_lance_2
				has_technology = tech_energy_torpedoes_2
				has_technology = tech_disruptors_3
				has_technology = tech_plasma_3
				has_technology = tech_lasers_5
				has_technology = tech_torpedoes_3
				has_technology = tech_swarmer_missiles_2
				has_technology = tech_missiles_5
				has_technology = tech_pd_tracking_3
				has_technology = tech_flak_batteries_3
				has_technology = tech_mass_accelerator_2
				has_technology = tech_kinetic_artillery_2
				has_technology = tech_autocannons_3
				has_technology = tech_mass_drivers_5
			}
		}
		hidden_effect = {
			country_event = { id = CortanaEvent.4 }
		}
	}
	option = {
		name = "CortanaEvent.1.Blocker"
		trigger = {
			# cortana_can_blockers_techs = yes
			# NOT = { has_country_flag = cortana_cooldown }
			NAND = {
				has_technology = tech_volcano
				has_technology = tech_mountain_range
				has_technology = tech_dangerous_wildlife
				has_technology = tech_dense_jungle
				has_technology = tech_quicksand_basin
				has_technology = tech_noxious_swamp
				has_technology = tech_massive_glacier
				has_technology = tech_toxic_kelp
				has_technology = tech_deep_sinkhole
			}
		}
		hidden_effect = {
			country_event = { id = CortanaEvent.5 }
		}
	}
	option = {
		name = "OTHER"
		trigger = {
			# cortana_can_other_techs = yes
			# NOT = { has_country_flag = cortana_cooldown }
			NAND = {
				has_technology = tech_climate_restoration
				has_technology = tech_space_mining_5
				has_technology = tech_space_science_5
				has_technology = tech_tomb_world_adaption
				has_technology = tech_construction_templates
			}
			NAND = {
				is_gestalt = no
				has_technology = tech_colonization_5
				has_technology = tech_synthetic_workers
			}
		}
		hidden_effect = {
			country_event = { id = CortanaEvent.10 }
		}
	}
	option = {
		name = "CortanaEvent.1.Repeatable"
		trigger = {
			# cortana_can_repeatable_techs = yes
			# NOT = { has_country_flag = cortana_cooldown }
			has_technology = tech_colonization_5
			has_technology = tech_space_mining_5
			has_technology = tech_space_science_5
			has_technology = tech_climate_restoration
			has_technology = tech_tomb_world_adaption
			#
			has_technology = tech_strike_craft_3
			has_technology = tech_disruptors_3
			has_technology = tech_energy_lance_2
			has_technology = tech_energy_torpedoes_2
			has_technology = tech_disruptors_3
			has_technology = tech_plasma_3
			has_technology = tech_lasers_5
			has_technology = tech_torpedoes_3
			has_technology = tech_swarmer_missiles_2
			has_technology = tech_missiles_5
			has_technology = tech_pd_tracking_3
			has_technology = tech_flak_batteries_3
			has_technology = tech_mass_accelerator_2
			has_technology = tech_kinetic_artillery_2
			has_technology = tech_autocannons_3
			has_technology = tech_mass_drivers_5
			has_technology = tech_reactor_boosters_3
			has_technology = tech_afterburners_2
			has_technology = tech_hyper_drive_3
			has_technology = tech_thrusters_4
			has_technology = tech_sensors_4
			has_technology = tech_ship_armor_5
			has_technology = tech_shield_rechargers_1
			has_technology = tech_shields_5
			has_technology = tech_zero_point_power
			has_technology = tech_housing_2
			has_technology = tech_alloys_2
			has_technology = tech_engineering_3
			has_technology = tech_society_3
			has_technology = tech_physics_3
			has_technology = tech_mineral_purification_2
			has_technology = tech_mining_3
			has_technology = tech_power_hub_2
			has_technology = tech_power_plant_4
			has_technology = tech_volcano
			has_technology = tech_mountain_range
			has_technology = tech_dangerous_wildlife
			has_technology = tech_dense_jungle
			has_technology = tech_quicksand_basin
			has_technology = tech_noxious_swamp
			has_technology = tech_massive_glacier
			has_technology = tech_toxic_kelp
			has_technology = tech_deep_sinkhole
		}
		hidden_effect = {
			country_event = { id = CortanaEvent.11 }
		}
	}
	option = {
		name = ABORT
		# trigger = { NOT = { has_country_flag = cortana_cooldown } }
		hidden_effect = {
			if = { limit = { has_technology = tech_cortana_optimized }
				add_resource = { energy = -1000 }
			}
			add_resource = { energy = 5000 }
		}
	}
	# option = {
	# 	name = CANCEL
	# 	trigger = { has_country_flag = cortana_cooldown }
	# 	hidden_effect = {
	# 		if = { limit = { has_technology = tech_cortana_optimized }
	# 			add_resource = { energy = -1000 }
	# 		}
	# 		add_resource = { energy = 5000 }
	# 	}
	# }
}

country_event = { # Cortana Research - Buildings
	id = "CortanaEvent.2"
	title = "CortanaEvent.1.Name"
	desc = "CortanaEvent.1.Desc"
	picture = GFX_evt_ai_cortana
	is_triggered_only = yes
	immediate = { set_country_flag = cortana_ready }
	after = { remove_country_flag = cortana_ready }
	option = {
		name = "planet_technician"
		trigger = { NOT = { has_technology = tech_power_plant_4 } }
		allow = { OR = { has_technology = tech_power_plant_1 can_research_technology = tech_power_plant_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_power_plant_1 } } give_technology = { tech = tech_power_plant_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_power_plant_2 } } give_technology = { tech = tech_power_plant_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_power_plant_3 } } give_technology = { tech = tech_power_plant_3 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_power_plant_4 } } give_technology = { tech = tech_power_plant_4 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.2.PowerHub"
		trigger = { NOT = { has_technology = tech_power_hub_2 } }
		allow = { OR = { has_technology = tech_power_hub_1 can_research_technology = tech_power_hub_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_power_hub_1 } } give_technology = { tech = tech_power_hub_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_power_hub_2 } } give_technology = { tech = tech_power_hub_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Mining"
		trigger = { NOT = { has_technology = tech_mining_3 } }
		allow = { OR = { has_technology = tech_mining_1 can_research_technology = tech_mining_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_mining_1 } } give_technology = { tech = tech_mining_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_mining_2 } } give_technology = { tech = tech_mining_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_mining_3 } } give_technology = { tech = tech_mining_3 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "tech_mineral_purification_1"
		trigger = { NOT = { has_technology = tech_mineral_purification_2 } }
		allow = { OR = { has_technology = tech_mineral_purification_1 can_research_technology = tech_mineral_purification_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_mineral_purification_1 } } give_technology = { tech = tech_mineral_purification_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_mineral_purification_2 } } give_technology = { tech = tech_mineral_purification_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Farmer"
		trigger = { NOR = { has_technology = tech_nutrient_replication is_machine_empire = yes } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_eco_simulation } } give_technology = { tech = tech_eco_simulation } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_gene_crops } } give_technology = { tech = tech_gene_crops } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_nano_vitality_crops } } give_technology = { tech = tech_nano_vitality_crops } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_nutrient_replication } } give_technology = { tech = tech_nutrient_replication } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "tech_food_processing_1"
		trigger = { NOT = { has_technology = tech_food_processing_2 } }
		allow = { OR = { has_technology = tech_food_processing_1 can_research_technology = tech_food_processing_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_food_processing_1 } } give_technology = { tech = tech_food_processing_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_food_processing_2 } } give_technology = { tech = tech_food_processing_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Hospital"
		trigger = { NOT = { has_technology = tech_frontier_hospital } is_gestalt = no }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_frontier_health } } give_technology = { tech = tech_frontier_health } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_frontier_hospital } } give_technology = { tech = tech_frontier_hospital } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Physics"
		trigger = { NOT = { has_technology = tech_physics_3 } }
		allow = { OR = { has_technology = tech_physics_1 can_research_technology = tech_physics_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_physics_1 } } give_technology = { tech = tech_physics_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_physics_2 } } give_technology = { tech = tech_physics_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_physics_3 } } give_technology = { tech = tech_physics_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Biologist"
		trigger = { NOT = { has_technology = tech_society_3 } }
		allow = { OR = { has_technology = tech_society_1 can_research_technology = tech_society_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_society_1 } } give_technology = { tech = tech_society_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_society_2 } } give_technology = { tech = tech_society_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_society_3 } } give_technology = { tech = tech_society_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Engineering"
		trigger = { NOT = { has_technology = tech_engineering_3 } }
		allow = { OR = { has_technology = tech_engineering_1 can_research_technology = tech_engineering_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_engineering_1 } } give_technology = { tech = tech_engineering_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_engineering_2 } } give_technology = { tech = tech_engineering_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_engineering_3 } } give_technology = { tech = tech_engineering_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Foundry"
		trigger = { NOT = { has_technology = tech_alloys_2 } }
		allow = { OR = { has_technology = tech_alloys_1 can_research_technology = tech_alloys_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_alloys_1 } } give_technology = { tech = tech_alloys_1 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_alloys_2 } } give_technology = { tech = tech_alloys_2 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "planet_artisans"
		trigger = { NOT = { has_technology = tech_luxuries_2 } is_gestalt = no }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_luxuries_1 } } give_technology = { tech = tech_luxuries_1 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_luxuries_2 } } give_technology = { tech = tech_luxuries_2 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Clerk"
		trigger = { NOT = { has_technology = tech_interstellar_economics } is_gestalt = no }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_space_trading } } give_technology = { tech = tech_space_trading } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_interstellar_economics } } give_technology = { tech = tech_interstellar_economics } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Culture"
		trigger = { NOT = { has_technology = tech_autocurating_vault } is_hive_empire = no is_spiritualist = no }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_cultural_heritage } } give_technology = { tech = tech_cultural_heritage } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_heritage_site } } give_technology = { tech = tech_heritage_site } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_hypercomms_forum } } give_technology = { tech = tech_hypercomms_forum } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_autocurating_vault } } give_technology = { tech = tech_autocurating_vault } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "planet_priests"
		trigger = { NOT = { has_technology = tech_transcendent_faith } is_spiritualist = yes }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_cultural_heritage } } give_technology = { tech = tech_cultural_heritage } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_holographic_rituals } } give_technology = { tech = tech_holographic_rituals } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_consecration_fields } } give_technology = { tech = tech_consecration_fields } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_transcendent_faith } } give_technology = { tech = tech_transcendent_faith } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.2.Drone"
		trigger = { NOT = { has_technology = tech_hive_confluence } is_hive_empire = yes }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_hive_node } } give_technology = { tech = tech_hive_node } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_hive_cluster } } give_technology = { tech = tech_hive_cluster } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_hive_confluence } } give_technology = { tech = tech_hive_confluence } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "PLANET_HOUSING_TITLE"
		trigger = { NOT = { has_technology = tech_housing_2 } }
		allow = { OR = { has_technology = tech_housing_1 can_research_technology = tech_housing_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_housing_1 } } give_technology = { tech = tech_housing_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_housing_2 } } give_technology = { tech = tech_housing_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = { name = BACK hidden_effect = { country_event = { id = CortanaEvent.1 } } }
}

country_event = { # Cortana Research - Ships Modules
	id = "CortanaEvent.3"
	title = "CortanaEvent.1.Name"
	desc = "CortanaEvent.1.Desc"
	picture = GFX_evt_ai_cortana
	is_triggered_only = yes
	immediate = {}
	after = { remove_country_flag = cortana_ready }
	option = {
		name = "CortanaEvent.3.Reactor"
		trigger = { NOT = { has_technology = tech_zero_point_power } }
		allow = { OR = { has_technology = tech_fission_power can_research_technology = tech_fission_power } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_fission_power } } give_technology = { tech = tech_fission_power } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_fusion_power } } give_technology = { tech = tech_fusion_power } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_cold_fusion_power } } give_technology = { tech = tech_cold_fusion_power } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_antimatter_power } } give_technology = { tech = tech_antimatter_power } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_zero_point_power } } give_technology = { tech = tech_zero_point_power } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.3.Shields"
		trigger = { NOT = { has_technology = tech_shields_5 } }
		allow = { OR = { has_technology = tech_shields_1 can_research_technology = tech_shields_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_shields_1 } } give_technology = { tech = tech_shields_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_shields_2 } } give_technology = { tech = tech_shields_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_shields_3 } } give_technology = { tech = tech_shields_3 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_shields_4 } } give_technology = { tech = tech_shields_4 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_shields_5 } } give_technology = { tech = tech_shields_5 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "tech_shield_rechargers_1"
		trigger = { NOT = { has_technology = tech_shield_rechargers_1 } }
		allow = { OR = { has_technology = tech_shield_rechargers_1 can_research_technology = tech_shield_rechargers_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_shield_rechargers_1 } } give_technology = { tech = tech_shield_rechargers_1 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "CortanaEvent.3.Armors"
		trigger = { NOT = { has_technology = tech_ship_armor_5 } }
		allow = { OR = { has_technology = tech_ship_armor_1 can_research_technology = tech_ship_armor_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_ship_armor_1 } } give_technology = { tech = tech_ship_armor_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_ship_armor_2 } } give_technology = { tech = tech_ship_armor_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_ship_armor_3 } } give_technology = { tech = tech_ship_armor_3 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_ship_armor_4 } } give_technology = { tech = tech_ship_armor_4 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_ship_armor_5 } } give_technology = { tech = tech_ship_armor_5 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "ship_sensor_components"
		trigger = { NOT = { has_technology = tech_sensors_4 } }
		allow = { OR = { has_technology = tech_sensors_2 can_research_technology = tech_sensors_2 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_sensors_2 } } give_technology = { tech = tech_sensors_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_sensors_3 } } give_technology = { tech = tech_sensors_3 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_sensors_4 } } give_technology = { tech = tech_sensors_4 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "thruster_components"
		trigger = { NOT = { has_technology = tech_thrusters_4 } }
		allow = { OR = { has_technology = tech_thrusters_1 can_research_technology = tech_thrusters_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_thrusters_1 } } give_technology = { tech = tech_thrusters_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_thrusters_2 } } give_technology = { tech = tech_thrusters_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_thrusters_3 } } give_technology = { tech = tech_thrusters_3 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_thrusters_4 } } give_technology = { tech = tech_thrusters_4 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "AFTERBURNER_1"
		trigger = { has_technology = tech_thrusters_2 NOT = { has_technology = tech_afterburners_2 } }
		allow = { OR = { has_technology = tech_afterburners_1 can_research_technology = tech_afterburners_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_afterburners_1 } } give_technology = { tech = tech_afterburners_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_afterburners_2 } } give_technology = { tech = tech_afterburners_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
		}
	}
	option = {
		name = "CortanaEvent.3.HyperDrives"
		trigger = { NOT = { has_technology = tech_hyper_drive_3 } }
		allow = { OR = { has_technology = tech_hyper_drive_1 can_research_technology = tech_hyper_drive_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_hyper_drive_2 } } give_technology = { tech = tech_hyper_drive_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_hyper_drive_3 } } give_technology = { tech = tech_hyper_drive_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "tech_reactor_booster_1"
		trigger = { has_technology = tech_antimatter_power NOT = { has_technology = tech_reactor_boosters_3 } }
		allow = { OR = { has_technology = tech_reactor_boosters_1 can_research_technology = tech_reactor_boosters_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_reactor_boosters_2 } } give_technology = { tech = tech_reactor_boosters_2 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_reactor_boosters_3 } } give_technology = { tech = tech_reactor_boosters_3 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = { name = BACK hidden_effect = { country_event = { id = CortanaEvent.1 } } }
}

country_event = { # Cortana Research - Ships Weapons
	id = "CortanaEvent.4"
	title = "CortanaEvent.1.Name"
	desc = "CortanaEvent.1.Desc"
	picture = GFX_evt_ai_cortana
	is_triggered_only = yes
	immediate = {}
	after = { remove_country_flag = cortana_ready }
	option = {
		name = "tech_mass_drivers_1"
		trigger = { NOT = { has_technology = tech_mass_drivers_5 } }
		allow = { OR = { has_technology = tech_mass_drivers_2 can_research_technology = tech_mass_drivers_2 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_mass_drivers_2 } } give_technology = { tech = tech_mass_drivers_2 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_mass_drivers_3 } } give_technology = { tech = tech_mass_drivers_3 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_mass_drivers_4 } } give_technology = { tech = tech_mass_drivers_4 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_mass_drivers_5 } } give_technology = { tech = tech_mass_drivers_5 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "tech_autocannons_1"
		trigger = { has_technology = tech_mass_drivers_2 NOT = { has_technology = tech_autocannons_3 } }
		allow = { OR = { has_technology = tech_autocannons_1 can_research_technology = tech_autocannons_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_autocannons_1 } } give_technology = { tech = tech_autocannons_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_autocannons_2 } } give_technology = { tech = tech_autocannons_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_autocannons_3 } } give_technology = { tech = tech_autocannons_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.4.Artillery"
		trigger = { has_technology = tech_mass_drivers_4 NOT = { has_technology = tech_kinetic_artillery_2 } }
		allow = { OR = { has_technology = tech_kinetic_artillery_1 can_research_technology = tech_kinetic_artillery_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_kinetic_artillery_1 } } give_technology = { tech = tech_kinetic_artillery_1 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_kinetic_artillery_2 } } give_technology = { tech = tech_kinetic_artillery_2 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.4.Accelerator"
		trigger = { has_technology = tech_mass_drivers_5 has_technology = tech_battleships NOR = { has_technology = tech_mass_accelerator_2 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_mass_accelerator_1 } } give_technology = { tech = tech_mass_accelerator_1 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_mass_accelerator_2 } } give_technology = { tech = tech_mass_accelerator_2 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.4.Flak"
		trigger = { NOT = { has_technology = tech_flak_batteries_3 } }
		allow = { OR = { has_technology = tech_flak_batteries_1 can_research_technology = tech_flak_batteries_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_flak_batteries_2 } } give_technology = { tech = tech_flak_batteries_2 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_flak_batteries_3 } } give_technology = { tech = tech_flak_batteries_3 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
		}
	}
	option = {
		name = "CortanaEvent.4.PD"
		trigger = { NOT = { has_technology = tech_pd_tracking_3 } }
		allow = { OR = { has_technology = tech_pd_tracking_1 can_research_technology = tech_pd_tracking_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_pd_tracking_2 } } give_technology = { tech = tech_pd_tracking_2 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_pd_tracking_3 } } give_technology = { tech = tech_pd_tracking_3 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
		}
	}
	option = {
		name = "missiles"
		trigger = { NOT = { has_technology = tech_missiles_5 } }
		allow = { OR = { has_technology = tech_missiles_1 can_research_technology = tech_missiles_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_missiles_1 } } give_technology = { tech = tech_missiles_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_missiles_2 } } give_technology = { tech = tech_missiles_2 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_missiles_3 } } give_technology = { tech = tech_missiles_3 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_missiles_4 } } give_technology = { tech = tech_missiles_4 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_missiles_5 } } give_technology = { tech = tech_missiles_5 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "SWARMER_MISSILE_1"
		trigger = { has_technology = tech_missiles_2 NOR = { has_technology = tech_swarmer_missiles_2 } }
		allow = { OR = { has_technology = tech_swarmer_missiles_1 can_research_technology = tech_swarmer_missiles_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_swarmer_missiles_1 } } give_technology = { tech = tech_swarmer_missiles_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_swarmer_missiles_2 } } give_technology = { tech = tech_swarmer_missiles_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "CortanaEvent.4.Torpedo"
		trigger = { has_technology = tech_missiles_1 NOR = { has_technology = tech_torpedoes_3 } }
		allow = { OR = { has_technology = tech_torpedoes_1 can_research_technology = tech_torpedoes_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_torpedoes_1 } } give_technology = { tech = tech_torpedoes_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_torpedoes_2 } } give_technology = { tech = tech_torpedoes_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_torpedoes_3 } } give_technology = { tech = tech_torpedoes_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.4.Laser"
		trigger = { NOT = { has_technology = tech_lasers_5 } }
		allow = { OR = { has_technology = tech_lasers_1 can_research_technology = tech_lasers_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_lasers_2 } } give_technology = { tech = tech_lasers_2 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_lasers_3 } } give_technology = { tech = tech_lasers_3 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_lasers_4 } } give_technology = { tech = tech_lasers_4 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_lasers_5 } } give_technology = { tech = tech_lasers_5 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.4.Plasma"
		trigger = { has_technology = tech_lasers_2 NOT = { has_technology = tech_plasma_3 } }
		allow = { OR = { has_technology = tech_plasma_1 can_research_technology = tech_plasma_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_plasma_1 } } give_technology = { tech = tech_plasma_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_plasma_2 } } give_technology = { tech = tech_plasma_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_plasma_3 } } give_technology = { tech = tech_plasma_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "tech_disruptors_1"
		trigger = { has_technology = tech_lasers_2 NOT = { has_technology = tech_disruptors_3 } }
		allow = { OR = { has_technology = tech_disruptors_1 can_research_technology = tech_disruptors_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_disruptors_1 } } give_technology = { tech = tech_disruptors_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_disruptors_2 } } give_technology = { tech = tech_disruptors_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_disruptors_3 } } give_technology = { tech = tech_disruptors_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.4.EnergyTorpedo"
		trigger = { has_technology = tech_lasers_4 NOT = { has_technology = tech_energy_torpedoes_2 } }
		allow = { OR = { has_technology = tech_energy_torpedoes_1 can_research_technology = tech_energy_torpedoes_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_energy_torpedoes_1 } } give_technology = { tech = tech_energy_torpedoes_1 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_energy_torpedoes_2 } } give_technology = { tech = tech_energy_torpedoes_2 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "CortanaEvent.4.Lance"
		trigger = { has_technology = tech_lasers_4 has_technology = tech_battleships NOT = { has_technology = tech_energy_lance_2 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_energy_lance_1 } } give_technology = { tech = tech_energy_lance_1 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_energy_lance_2 } } give_technology = { tech = tech_energy_lance_2 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "tech_arc_emitter_1"
		trigger = { has_technology = tech_disruptors_3 has_technology = tech_battleships NOT = { has_technology = tech_arc_emitter_2 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_arc_emitter_1 } } give_technology = { tech = tech_arc_emitter_1 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_arc_emitter_2 } } give_technology = { tech = tech_arc_emitter_2 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.4.Craft"
		trigger = { NOT = { has_technology = tech_strike_craft_3 } }
		allow = { OR = { has_technology = tech_strike_craft_1 can_research_technology = tech_strike_craft_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_strike_craft_1 } } give_technology = { tech = tech_strike_craft_1 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_strike_craft_2 } } give_technology = { tech = tech_strike_craft_2 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
			else_if = { limit = { NOT = { has_technology = tech_strike_craft_3 } } give_technology = { tech = tech_strike_craft_3 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = { name = BACK hidden_effect = { country_event = { id = CortanaEvent.1 } } }
}

country_event = { # Cortana Research - Blockers
	id = "CortanaEvent.5"
	title = "CortanaEvent.1.Name"
	desc = "CortanaEvent.1.Desc"
	picture = GFX_evt_ai_cortana
	is_triggered_only = yes
	immediate = {}
	after = { remove_country_flag = cortana_ready }
	option = { name = "tech_volcano" trigger = { NOT = { has_technology = tech_volcano } }
		allow = { can_research_technology = tech_volcano } hidden_effect = { give_technology = { tech = tech_volcano } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = "tech_mountain_range" trigger = { NOT = { has_technology = tech_mountain_range } }
		allow = { can_research_technology = tech_mountain_range } hidden_effect = { give_technology = { tech = tech_mountain_range } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = "tech_dangerous_wildlife" trigger = { NOT = { has_technology = tech_dangerous_wildlife } }
		allow = { can_research_technology = tech_dangerous_wildlife } hidden_effect = { give_technology = { tech = tech_dangerous_wildlife } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = "tech_dense_jungle" trigger = { NOT = { has_technology = tech_dense_jungle } }
		allow = { can_research_technology = tech_dense_jungle } hidden_effect = { give_technology = { tech = tech_dense_jungle } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = "tech_quicksand_basin" trigger = { NOT = { has_technology = tech_quicksand_basin } }
		allow = { can_research_technology = tech_quicksand_basin } hidden_effect = { give_technology = { tech = tech_quicksand_basin } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = "tech_noxious_swamp" trigger = { NOT = { has_technology = tech_noxious_swamp } }
		allow = { can_research_technology = tech_noxious_swamp } hidden_effect = { give_technology = { tech = tech_noxious_swamp } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = "tech_massive_glacier" trigger = { NOT = { has_technology = tech_massive_glacier } }
		allow = { can_research_technology = tech_massive_glacier } hidden_effect = { give_technology = { tech = tech_massive_glacier } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = "tech_toxic_kelp" trigger = { NOT = { has_technology = tech_toxic_kelp } }
		allow = { can_research_technology = tech_toxic_kelp } hidden_effect = { give_technology = { tech = tech_toxic_kelp } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = "tech_deep_sinkhole" trigger = { NOT = { has_technology = tech_deep_sinkhole } }
		allow = { can_research_technology = tech_deep_sinkhole } hidden_effect = { give_technology = { tech = tech_deep_sinkhole } set_timed_country_flag = { flag = cortana_cooldown years = 1 } } }
	option = { name = BACK hidden_effect = { country_event = { id = CortanaEvent.1 } } }
}

country_event = { # Cortana Research - Others
	id = "CortanaEvent.10"
	title = "CortanaEvent.1.Name"
	desc = "CortanaEvent.1.Desc"
	picture = GFX_evt_ai_cortana
	is_triggered_only = yes
	immediate = {}
	after = { remove_country_flag = cortana_ready }
	option = {
		name = "CortanaEvent.10.Terraformation"
		trigger = { NOT = { has_technology = tech_climate_restoration } }
		allow = { OR = { has_technology = tech_terrestrial_sculpting can_research_technology = tech_terrestrial_sculpting } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_terrestrial_sculpting } } give_technology = { tech = tech_terrestrial_sculpting } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_ecological_adaptation } } give_technology = { tech = tech_ecological_adaptation } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_climate_restoration } } give_technology = { tech = tech_climate_restoration } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
		}
	}
	option = {
		name = "feature_colonization"
		trigger = { NOR = { is_gestalt = yes has_technology = tech_colonization_5 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_colonization_1 } } give_technology = { tech = tech_colonization_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_colonization_2 } } give_technology = { tech = tech_colonization_2 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_colonization_3 } } give_technology = { tech = tech_colonization_3 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_colonization_4 } } give_technology = { tech = tech_colonization_4 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_colonization_5 } } give_technology = { tech = tech_colonization_5 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "mining_station_plural"
		trigger = { NOT = { has_technology = tech_space_mining_5 } }
		allow = { OR = { has_technology = tech_space_mining_1 can_research_technology = tech_space_mining_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_space_mining_1 } } give_technology = { tech = tech_space_mining_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_space_mining_2 } } give_technology = { tech = tech_space_mining_2 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_space_mining_3 } } give_technology = { tech = tech_space_mining_3 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_space_mining_4 } } give_technology = { tech = tech_space_mining_4 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_space_mining_5 } } give_technology = { tech = tech_space_mining_5 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "research_station_plural"
		trigger = { NOT = { has_technology = tech_space_science_5 } }
		allow = { OR = { has_technology = tech_space_science_1 can_research_technology = tech_space_science_1 } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_space_science_1 } } give_technology = { tech = tech_space_science_1 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_space_science_2 } } give_technology = { tech = tech_space_science_2 } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_space_science_3 } } give_technology = { tech = tech_space_science_3 } set_timed_country_flag = { flag = cortana_cooldown days = 576 } }
			else_if = { limit = { NOT = { has_technology = tech_space_science_4 } } give_technology = { tech = tech_space_science_4 } set_timed_country_flag = { flag = cortana_cooldown days = 864 } }
			else_if = { limit = { NOT = { has_technology = tech_space_science_5 } } give_technology = { tech = tech_space_science_5 } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "tech_tomb_world_adaption"
		trigger = { has_technology = tech_colonization_2 NOT = { has_technology = tech_tomb_world_adaption } }
		allow = { OR = { has_technology = tech_tomb_world_adaption can_research_technology = tech_tomb_world_adaption } }
		hidden_effect = {
			give_technology = { tech = tech_tomb_world_adaption } set_timed_country_flag = { flag = cortana_cooldown years = 1 }
		}
	}
	option = {
		name = "policy_robot_pop_policy"
		trigger = { NOR = { is_gestalt = yes has_technology = tech_synthetic_workers } }
		allow = { OR = { has_technology = tech_robotic_workers can_research_technology = tech_robotic_workers } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_robotic_workers } } give_technology = { tech = tech_robotic_workers } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_droid_workers } } give_technology = { tech = tech_droid_workers } set_timed_country_flag = { flag = cortana_cooldown months = 20 } }
			else_if = { limit = { NOT = { has_technology = tech_synthetic_workers } } give_technology = { tech = tech_synthetic_workers } set_timed_country_flag = { flag = cortana_cooldown years = 3 } }
		}
	}
	option = {
		name = "CortanaEvent.10.Assembly"
		trigger = { NOT = { has_technology = tech_construction_templates } }
		allow = { OR = { has_technology = tech_assembly_pattern can_research_technology = tech_assembly_pattern } }
		hidden_effect = {
			if = { limit = { NOT = { has_technology = tech_assembly_pattern } } give_technology = { tech = tech_assembly_pattern } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
			else_if = { limit = { NOT = { has_technology = tech_construction_templates } } give_technology = { tech = tech_construction_templates } set_timed_country_flag = { flag = cortana_cooldown years = 1 } }
		}
	}
	option = { name = BACK hidden_effect = { country_event = { id = CortanaEvent.1 } } }
}

country_event = { # Cortana Research - Others
	id = "CortanaEvent.11"
	title = "CortanaEvent.1.Name"
	desc = "CortanaEvent.1.Desc"
	picture = GFX_evt_ai_cortana
	is_triggered_only = yes
	immediate = {}
	after = { remove_country_flag = cortana_ready }
	option = { name = "tech_repeatable_improved_tile_energy_output" trigger = { can_research_technology = tech_repeatable_improved_tile_energy_output } hidden_effect = { give_technology = { tech = tech_repeatable_improved_tile_energy_output } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_shield_output" trigger = { can_research_technology = tech_repeatable_improved_shield_output } hidden_effect = { give_technology = { tech = tech_repeatable_improved_shield_output } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_weapon_type_energy_damage" trigger = { can_research_technology = tech_repeatable_weapon_type_energy_damage } hidden_effect = { give_technology = { tech = tech_repeatable_weapon_type_energy_damage } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_weapon_type_energy_fire_rate" trigger = { can_research_technology = tech_repeatable_weapon_type_energy_fire_rate } hidden_effect = { give_technology = { tech = tech_repeatable_weapon_type_energy_fire_rate } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_reduced_building_cost" trigger = { can_research_technology = tech_repeatable_reduced_building_cost } hidden_effect = { give_technology = { tech = tech_repeatable_reduced_building_cost } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_reduced_building_time" trigger = { can_research_technology = tech_repeatable_reduced_building_time } hidden_effect = { give_technology = { tech = tech_repeatable_reduced_building_time } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_tile_food_output" trigger = { can_research_technology = tech_repeatable_improved_tile_food_output } hidden_effect = { give_technology = { tech = tech_repeatable_improved_tile_food_output } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_core_system_cap" trigger = { can_research_technology = tech_repeatable_improved_core_system_cap } hidden_effect = { give_technology = { tech = tech_repeatable_improved_core_system_cap } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	# option = { name = "tech_repeatable_improved_edict_length" trigger = { can_research_technology = tech_repeatable_improved_edict_length } hidden_effect = { give_technology = { tech = tech_repeatable_improved_edict_length } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_army_damage" trigger = { can_research_technology = tech_repeatable_improved_army_damage } hidden_effect = { give_technology = { tech = tech_repeatable_improved_army_damage } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_army_health" trigger = { can_research_technology = tech_repeatable_improved_army_health } hidden_effect = { give_technology = { tech = tech_repeatable_improved_army_health } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_starbase_capacity" trigger = { can_research_technology = tech_repeatable_improved_starbase_capacity } hidden_effect = { give_technology = { tech = tech_repeatable_improved_starbase_capacity } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_naval_cap" trigger = { can_research_technology = tech_repeatable_naval_cap } hidden_effect = { give_technology = { tech = tech_repeatable_naval_cap } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_command_limit" trigger = { can_research_technology = tech_repeatable_command_limit } hidden_effect = { give_technology = { tech = tech_repeatable_command_limit } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_tile_mineral_output" trigger = { can_research_technology = tech_repeatable_improved_tile_mineral_output } hidden_effect = { give_technology = { tech = tech_repeatable_improved_tile_mineral_output } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_military_station_damage" trigger = { can_research_technology = tech_repeatable_improved_military_station_damage } hidden_effect = { give_technology = { tech = tech_repeatable_improved_military_station_damage } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_military_station_health" trigger = { can_research_technology = tech_repeatable_improved_military_station_health } hidden_effect = { give_technology = { tech = tech_repeatable_improved_military_station_health } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_weapon_type_strike_craft_fire_damage" trigger = { can_research_technology = tech_repeatable_weapon_type_strike_craft_fire_damage } hidden_effect = { give_technology = { tech = tech_repeatable_weapon_type_strike_craft_fire_damage } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_weapon_type_strike_craft_fire_rate" trigger = { can_research_technology = tech_repeatable_weapon_type_strike_craft_fire_rate } hidden_effect = { give_technology = { tech = tech_repeatable_weapon_type_strike_craft_fire_rate } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_improved_armor_output" trigger = { can_research_technology = tech_repeatable_improved_armor_output } hidden_effect = { give_technology = { tech = tech_repeatable_improved_armor_output } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_weapon_type_explosive_damage" trigger = { can_research_technology = tech_repeatable_weapon_type_explosive_damage } hidden_effect = { give_technology = { tech = tech_repeatable_weapon_type_explosive_damage } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_weapon_type_explosive_fire_rate" trigger = { can_research_technology = tech_repeatable_weapon_type_explosive_fire_rate } hidden_effect = { give_technology = { tech = tech_repeatable_weapon_type_explosive_fire_rate } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_weapon_type_kinetic_damage" trigger = { can_research_technology = tech_repeatable_weapon_type_kinetic_damage } hidden_effect = { give_technology = { tech = tech_repeatable_weapon_type_kinetic_damage } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = "tech_repeatable_weapon_type_kinetic_fire_rate" trigger = { can_research_technology = tech_repeatable_weapon_type_kinetic_fire_rate } hidden_effect = { give_technology = { tech = tech_repeatable_weapon_type_kinetic_fire_rate } set_timed_country_flag = { flag = cortana_cooldown years = 4 } } }
	option = { name = BACK hidden_effect = { country_event = { id = CortanaEvent.1 } } }
}

# Cortana Research - Auto - Tech
country_event = {
	id = CortanaEvent.12
	title = "CortanaEvent.12.Name"
	desc = "CortanaEvent.12.Desc"
	picture = GFX_evt_ai_cortana
	show_sound = event_scanner
	is_triggered_only = yes
	trigger = { has_technology = tech_cortana_initiatives NOR = { has_country_flag = cortana_initiave_tech_cooldown has_country_flag = cortana_research_random_repeatable_technology_no_warning } }
	option = {
		name = "CortanaEvent.12.a"
		custom_tooltip = "CortanaEvent.12.a.tooltip"
	}
	option = { name = "UniqueAscensionPerks.no_message"
		set_country_flag = cortana_research_random_repeatable_technology_no_warning
		custom_tooltip = "CortanaEvent.12.a.tooltip"
	}
}
# Cortana Research - Auto - Tech - Hidden
country_event = {
	id = CortanaEvent.13
	hide_window = yes
	is_triggered_only = yes
	# mean_time_to_happen = {
	# 	months = 18
	# 	modifier = { factor = 0.5 has_technology = tech_cortana_advanced }
	# }
	trigger = {
		has_technology = tech_cortana_initiatives
		NOT = { has_country_flag = cortana_initiave_tech_cooldown }
	}
	immediate = {
		if = {
			limit = { has_technology = tech_cortana_advanced } set_timed_country_flag = { flag = cortana_initiave_tech_cooldown months = 20 }
			else = { set_timed_country_flag = { flag = cortana_initiave_tech_cooldown months = 36 } }
		}
		cortana_research_random_repeatable_technology = yes
		if = { limit = { has_technology = tech_cortana_perfect } cortana_research_random_repeatable_technology = yes }
		if = { limit = { NOR = { is_ai = yes has_country_flag = cortana_research_random_repeatable_technology_no_warning } }
			country_event = { id = CortanaEvent.12 }
		}
	}
}
 # Cortana Research - Help - Tech - Progress
country_event = {
	id = CortanaEvent.14
	title = "CortanaEvent.14.Name"
	desc = "CortanaEvent.14.Desc"
	picture = GFX_evt_ai_cortana
	show_sound = event_scanner
	is_triggered_only = yes
	trigger = { has_technology = tech_cortana_help NOR = { has_country_flag = cortana_help_tech_cooldown has_country_flag = cortana_helps_research_current_technology_no_warning } }
	option = {
		name = "CortanaEvent.14.a"
		custom_tooltip = "CortanaEvent.14.a.tooltip"
	}
	option = {
		name = "UniqueAscensionPerks.no_message"
		set_country_flag = cortana_helps_research_current_technology_no_warning
		custom_tooltip = "CortanaEvent.14.a.tooltip"
	}
}
 # Cortana Research - Help - Tech - Hidden
country_event = {
	id = CortanaEvent.15
	hide_window = yes
	is_triggered_only = yes
	# mean_time_to_happen = {
	# 	months = 18
	# 	modifier = { factor = 0.5 has_technology = tech_cortana_advanced }
	# }
	trigger = {
		has_technology = tech_cortana_help
		NOT = { has_country_flag = cortana_help_tech_cooldown }
	}
	immediate = {
		if = {
			limit = { has_technology = tech_cortana_advanced } set_timed_country_flag = { flag = cortana_help_tech_cooldown months = 16 }
			else = { set_timed_country_flag = { flag = cortana_help_tech_cooldown months = 28 } }
		}
		cortana_helps_research_current_technology = yes
		if = { limit = { has_technology = tech_cortana_perfect } cortana_helps_research_current_technology = yes }
		if = { limit = { NOR = { is_ai = yes has_country_flag = cortana_helps_research_current_technology_no_warning } }
			country_event = { id = CortanaEvent.14 }
		}
	}
}

country_event = {
	id = CortanaEvent.20
	title = "CortanaEvent.20.Name"
	desc = "CortanaEvent.20.Desc"
	picture = GFX_evt_ai_cortana
	show_sound = event_scanner
	is_triggered_only = yes
	# mean_time_to_happen = { months = 18 }
	trigger = {
		has_ascension_perk = ap_ai_cortana
		has_technology = tech_cortana_initiatives
		has_technology = tech_cortana_help
		has_technology = tech_cortana_optimized
		has_technology = tech_cortana_advanced
		has_technology = tech_cortana_perfect
		NOT = { has_country_flag = has_cortana_relic }
	}
	immediate = { set_country_flag = has_cortana_relic }
	option = { name = EXCELLENT add_relic = r_cortana }
}

country_event = {
	id = CortanaEvent.100
	title = "CortanaEvent.100.Name"
	desc = "CortanaEvent.100.Desc"
	show_sound = event_ai_started
	picture = GFX_evt_ai_cortana
	location = capital_scope
	is_triggered_only = yes
	option = { name = EXCELLENT country_event = { id = CortanaEvent.1 } }
}
