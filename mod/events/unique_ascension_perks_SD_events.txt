namespace = UniqueAscensionPerksEvents

######################################
#									 #
######### Space Domestication #########
#									 #
######################################

country_event = {
	id = UniqueAscensionPerksEvents.1000
	show_sound = event_mystic_reveal
	title = "UniqueAscensionPerksEvents.1000.Name"
	desc = {
		trigger = {
			text = "ap_space_domestication_desc"
			text = newline
			text = "UniqueAscensionPerksEvents.1001.Desc"
		}
	}
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = space_domestication_room }
	is_triggered_only = yes
	trigger = {
		NOR = {
			has_active_event = { UniqueAscensionPerksEvents.1000 UniqueAscensionPerksEvents.1001 }
			has_special_project = SPACE_DOMESTICATION
		}
	}
	# immediate = {}
	# after = {}
	option = { name = "NAME_Tiyanki_Space_Whale" allow = { has_technology = tech_space_whale_weapon_1 } custom_tooltip = "domesticated_tiyanki_tooltip_1" custom_tooltip = "domesticated_tiyanki_tooltip_2" hidden_effect = { set_country_flag = space_domestication_tiyanki set_country_flag = space_domestication_selected country_event = { id = UniqueAscensionPerksEvents.1001 } } }
	option = { name = "space_amoeba" allow = { has_technology = tech_amoeba_strike_craft_1 } custom_tooltip = "domesticated_amoeba_tooltip_1" custom_tooltip = "domesticated_amoeba_tooltip_2" hidden_effect = { set_country_flag = space_domestication_amoeba set_country_flag = space_domestication_selected country_event = { id = UniqueAscensionPerksEvents.1001 } } }
	option = { name = "NAME_Crystalline_Entity" allow = { OR = { has_technology = tech_crystal_armor_1 has_technology = tech_crystal_armor_2 } } custom_tooltip = "domesticated_crystals_tooltip_1" custom_tooltip = "domesticated_crystals_tooltip_2" hidden_effect = { set_country_flag = space_domestication_crystal set_country_flag = space_domestication_selected country_event = { id = UniqueAscensionPerksEvents.1001 } } }
	option = { name = "clouds_1_chain_title" allow = { has_technology = tech_space_cloud_weapon_1 } custom_tooltip = "domesticated_cloud_tooltip_1" custom_tooltip = "domesticated_cloud_tooltip_2" hidden_effect = { set_country_flag = space_domestication_cloud set_country_flag = space_domestication_selected country_event = { id = UniqueAscensionPerksEvents.1001 } } }
	option = { name = "job_mining_drone" allow = { has_technology = tech_mining_drone_weapon_1 } custom_tooltip = "domesticated_drones_tooltip_1" custom_tooltip = "domesticated_drones_tooltip_2" hidden_effect = { set_country_flag = space_domestication_drone set_country_flag = space_domestication_selected country_event = { id = UniqueAscensionPerksEvents.1001 } } }
	option = { name = EXIT ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1001
	title = "UniqueAscensionPerksEvents.1001.Name"
	desc = {
		trigger = {
			success_text = { text = "UniqueAscensionPerksEvents.1001.Tiyanki" has_country_flag = space_domestication_tiyanki }
			success_text = { text = "UniqueAscensionPerksEvents.1001.Amoeba" has_country_flag = space_domestication_amoeba }
			success_text = { text = "UniqueAscensionPerksEvents.1001.Crystal" has_country_flag = space_domestication_crystal }
			success_text = { text = "UniqueAscensionPerksEvents.1001.Cloud" has_country_flag = space_domestication_cloud }
			success_text = { text = "UniqueAscensionPerksEvents.1001.Drone" has_country_flag = space_domestication_drone }
			text = newline
			text = "UniqueAscensionPerksEvents.1001.Desc"
		}
	}
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = space_domestication_room }
	is_triggered_only = yes
	trigger = {
		NOR = {
			has_active_event = { UniqueAscensionPerksEvents.1001 }
			has_special_project = SPACE_DOMESTICATION
		}
	}
	immediate = { get_capital_planet = yes }
	option = { name = EXCELLENT enable_special_project = { name = SPACE_DOMESTICATION location = event_target:capital_planet owner = root } }
}

country_event = {
	id = UniqueAscensionPerksEvents.1002
	title = "UniqueAscensionPerksEvents.1002.Name"
	desc = {
		trigger = {
			text = "UniqueAscensionPerksEvents.1002.Desc"
			text = newline
			text = "UniqueAscensionPerksEvents.1002.Selected"
			success_text = { text = "UniqueAscensionPerksEvents.1002.Tiyanki" has_country_flag = space_domestication_tiyanki }
			success_text = { text = "UniqueAscensionPerksEvents.1002.Amoeba" has_country_flag = space_domestication_amoeba }
			success_text = { text = "UniqueAscensionPerksEvents.1002.Crystal" has_country_flag = space_domestication_crystal }
			success_text = { text = "UniqueAscensionPerksEvents.1002.Cloud" has_country_flag = space_domestication_cloud }
			success_text = { text = "UniqueAscensionPerksEvents.1002.Drone" has_country_flag = space_domestication_drone }
		}
	}
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = space_domestication_room }
	is_triggered_only = yes
	immediate = {
		save_event_target_as = main_country
		if = {
			limit = { NOT = { has_country_flag = space_domestication_project_completed } }
			create_domestication_spaceborn_alien_country = yes
			set_country_flag = space_domestication_project_completed
		} else = {
			random_relation = {
				limit = { is_country_type = domesticated_spaceborn_alien has_relation_flag = { who = root flag = domesticated_spaceborn_alien } }
				save_event_target_as = domesticated_spaceborn_alien
			}
		}
		# Fallback for wathever reason
		if = { limit = { NOT = { exists = event_target:domesticated_spaceborn_alien } }
			if = { limit = { any_country = { is_country_type = domesticated_spaceborn_alien has_relation_flag = { who = root flag = domesticated_spaceborn_alien } } }
				random_country = {
					limit = { is_country_type = domesticated_spaceborn_alien has_relation_flag = { who = root flag = domesticated_spaceborn_alien } }
					save_event_target_as = domesticated_spaceborn_alien
				}
			} else = { create_domestication_spaceborn_alien_country = yes }
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.1002.Breeding"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req02 is_subject = no }
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req02 NOT = { has_country_flag = space_domestication_fertilization_protocol } }
			custom_tooltip = {
				fail_text = breeding_fertilization_protocol_req # can_breeding_fertilization_protocol = yes
				OR = {
					AND = { has_country_flag = space_domestication_tiyanki	resource_stockpile_compare = { resource = food value >= 3000 } }
					AND = { has_country_flag = space_domestication_amoeba	resource_stockpile_compare = { resource = food value >= 3000 } }
					AND = { has_country_flag = space_domestication_crystal	resource_stockpile_compare = { resource = minerals value >= 3000 } }
					AND = { has_country_flag = space_domestication_cloud	resource_stockpile_compare = { resource = energy value >= 3000 } }
					AND = { has_country_flag = space_domestication_drone	resource_stockpile_compare = { resource = energy value >= 3000 } }
				}
			}
		}
		custom_tooltip = "breeding_fertilization_protocol_tooltip"
		# breeding_fertilization_protocol_paying = yes
		if		= { limit = { has_country_flag = space_domestication_tiyanki	} add_resource = { food		= -3000 } }
		else_if = { limit = { has_country_flag = space_domestication_amoeba		} add_resource = { food		= -3000 } }
		else_if = { limit = { has_country_flag = space_domestication_crystal	} add_resource = { minerals	= -3000 } }
		else_if = { limit = { has_country_flag = space_domestication_cloud		} add_resource = { energy	= -3000 } }
		else_if = { limit = { has_country_flag = space_domestication_drone		} add_resource = { energy	= -3000 } }
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1002 }
			country_event = { id = UniqueAscensionPerksEvents.1010 days = 360 }
			set_timed_country_flag = { flag = space_domestication_fertilization_protocol years = 1 }
			# breeding_fertilization_protocol = {
			random_planet_within_border = {
				limit = { has_planet_flag = domesticated_alien_home }
				if		= { limit = { root = { has_country_flag = space_domestication_tiyanki	} merg_is_gas_giant = yes } save_event_target_as = spawn_location }
				else_if = { limit = { root = { has_country_flag = space_domestication_amoeba	} is_planet_class = pc_toxic } save_event_target_as = spawn_location }
				else_if = { limit = { root = { has_country_flag = space_domestication_crystal	} is_planet_class = pc_frozen } save_event_target_as = spawn_location }
				else_if = { limit = { root = { has_country_flag = space_domestication_cloud		} is_planet_class = pc_black_hole } save_event_target_as = spawn_location }
				else_if = { limit = { root = { has_country_flag = space_domestication_drone		} is_planet_class = pc_asteroid } save_event_target_as = spawn_location }
			}
			event_target:domesticated_spaceborn_alien = {
				create_fleet = {
					name = "Domesticated Fertilized Aliens"
					settings = { spawn_debris = no is_boss = yes }
					effect = {
						set_owner = event_target:domesticated_spaceborn_alien
						if = { limit = { event_target:main_country = { has_country_flag = space_domestication_tiyanki } } create_ship = { name = "" design = "Domesticated Mother Tiyanki" } }
						else_if = { limit = { event_target:main_country = { has_country_flag = space_domestication_amoeba } } while = { count = 25 create_ship = { name = "" design = "Demosticated Amoeba Mother" } } }
						else_if = { limit = { event_target:main_country = { has_country_flag = space_domestication_crystal } } create_ship = { name = "" design = "Domesticated Mother Crystal" } }
						else_if = { limit = { event_target:main_country = { has_country_flag = space_domestication_cloud } } create_ship = { name = "" design = "Domesticated Mother Cloud" } }
						else_if = { limit = { event_target:main_country = { has_country_flag = space_domestication_drone } } create_ship = { name = "" design = "Reprogrammed Ancient Replicator Drone" } }
						set_location = { target = event_target:spawn_location distance = 10 angle = random }
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = self
						set_aggro_range = 5000
						set_formation_scale = 4.0
						save_event_target_as = domesticated_fleet
						set_fleet_flag = domesticated_fleet
						set_fleet_flag = domesticated_mother_fleet
					}
				}
			}
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.1002.Gathering"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req02 NOT = { has_country_flag = space_domestication_resources_protocol } }
			custom_tooltip = { fail_text = "resources_gathering_protocol_req" can_resources_gathering_protocol = yes }
			custom_tooltip = {
				fail_text = no_fertilized_fleet_req # domesticated_alien_has_fertilized_fleet = yes
				event_target:domesticated_spaceborn_alien = { any_owned_fleet = { has_fleet_flag = domesticated_mother_fleet } }
			}
		}
		custom_tooltip = "resources_gathering_protocol_tooltip"
		resources_gathering_protocol_paying = yes
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1002 }
			country_event = { id = UniqueAscensionPerksEvents.1011 days = 180 }
			set_timed_country_flag = { flag = space_domestication_resources_protocol months = 6 }
			resources_gathering_protocol = yes
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.1002.Military"
		allow = {
			custom_tooltip = { fail_text = requires_independence is_subject = no }
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req03 NOR = { has_country_flag = space_domestication_security_protocol has_country_flag = space_domestication_military_protocol } }
			custom_tooltip = {
				fail_text = military_assault_protocol_req # can_military_assault_protocol = yes
				OR = {
					AND = { has_country_flag = space_domestication_tiyanki	resource_stockpile_compare = { resource = food value >= 5000 } }
					AND = { has_country_flag = space_domestication_amoeba	resource_stockpile_compare = { resource = food value >= 5000 } }
					AND = { has_country_flag = space_domestication_crystal	resource_stockpile_compare = { resource = minerals value >= 5000 } }
					AND = { has_country_flag = space_domestication_cloud	resource_stockpile_compare = { resource = energy value >= 5000 } }
					AND = { has_country_flag = space_domestication_drone	resource_stockpile_compare = { resource = energy value >= 5000 } }
				}
			}
			custom_tooltip = {
				fail_text = no_fertilized_fleet_req # domesticated_alien_has_fertilized_fleet = yes
				event_target:domesticated_spaceborn_alien = { any_owned_fleet = { has_fleet_flag = domesticated_mother_fleet } }
			}
		}
		custom_tooltip = "military_assault_protocol_tooltip"
		# military_assault_protocol_paying = {
		if = { limit = { has_country_flag = space_domestication_tiyanki } add_resource = { food = -5000 } }
		else_if = { limit = { has_country_flag = space_domestication_amoeba } add_resource = { food = -5000 } }
		else_if = { limit = { has_country_flag = space_domestication_crystal } add_resource = { minerals = -5000 } }
		else_if = { limit = { has_country_flag = space_domestication_cloud } add_resource = { energy = -5000 } }
		else_if = { limit = { has_country_flag = space_domestication_drone } add_resource = { energy = -5000 } }
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1002 }
			country_event = { id = UniqueAscensionPerksEvents.1012 days = 720 }
			set_timed_country_flag = { flag = space_domestication_military_protocol years = 2 }
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.1002.Security"
		allow = {
			custom_tooltip = { fail_text = requires_independence is_subject = no }
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req04 NOR = { has_country_flag = space_domestication_security_protocol has_country_flag = space_domestication_military_protocol } }
			custom_tooltip = {
				fail_text = "military_assault_protocol_req" # can_security_defense_protocol = yes
				OR = {
					AND = { has_country_flag = space_domestication_tiyanki	resource_stockpile_compare = { resource = food value >= 5000 } }
					AND = { has_country_flag = space_domestication_amoeba	resource_stockpile_compare = { resource = food value >= 5000 } }
					AND = { has_country_flag = space_domestication_crystal	resource_stockpile_compare = { resource = minerals value >= 5000 } }
					AND = { has_country_flag = space_domestication_cloud	resource_stockpile_compare = { resource = energy value >= 5000 } }
					AND = { has_country_flag = space_domestication_drone	resource_stockpile_compare = { resource = energy value >= 5000 } }
				}
			}
		}
		custom_tooltip = "security_defense_protocol_tooltip"
		# security_defense_protocol_paying = {
		if = { limit = { has_country_flag = space_domestication_tiyanki } add_resource = { food = -5000 } }
		else_if = { limit = { has_country_flag = space_domestication_amoeba } add_resource = { food = -5000 } }
		else_if = { limit = { has_country_flag = space_domestication_crystal } add_resource = { minerals = -5000 } }
		else_if = { limit = { has_country_flag = space_domestication_cloud } add_resource = { energy = -5000 } }
		else_if = { limit = { has_country_flag = space_domestication_drone } add_resource = { energy = -5000 } }
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1002 }
			country_event = { id = UniqueAscensionPerksEvents.1013 days = 720 }
			set_timed_country_flag = { flag = space_domestication_security_protocol years = 2 }
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.1002.Assistance"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req02 NOT = { has_country_flag = space_domestication_research_protocol } }
			custom_tooltip = { fail_text = "resources_gathering_protocol_req" can_research_assistance_protocol = yes }
		}
		custom_tooltip = "research_assistance_protocol_tooltip"
		resources_gathering_protocol_paying = yes
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1002 }
			country_event = { id = UniqueAscensionPerksEvents.1014 days = 180 }
			set_timed_country_flag = { flag = space_domestication_research_protocol months = 6 }
			research_assistance_protocol = yes
		}
	}
	option = { name = EXIT ai_chance = { factor = 0.1 } default_hide_option = yes }
	option = {
		name = "UniqueAscensionPerksEvents.1002.Kill"
		allow = {
			custom_tooltip = {
				fail_text = UniqueAscensionPerksEvents.1002.Req05
				# domesticated_kill_all_domesticated_aliens = yes
				event_target:domesticated_spaceborn_alien = { any_owned_fleet = { has_fleet_flag = domesticated_fleet } }
			}
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req02 NOT = { has_country_flag = space_domestication_all_killed } }
		}
		custom_tooltip = "UniqueAscensionPerksEvents.1002.Kill.tooltip"
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1002 }
			set_timed_country_flag = { flag = space_domestication_all_killed years = 1 }
			# space_domestication_kill_them = yes
			event_target:domesticated_spaceborn_alien = { every_controlled_fleet = { limit = { has_fleet_flag = domesticated_fleet } destroy_fleet = this } }
		}
	}
}

country_event = {
	id = UniqueAscensionPerksEvents.1010
	title = "UniqueAscensionPerksEvents.1010.Name"
	desc = "UniqueAscensionPerksEvents.1010.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_space_domestication
	location = capital_scope
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1010 } }
	}
	option = {
		name = "UniqueAscensionPerks.lets_see"
		trigger = { NOT = { has_active_event = { UniqueAscensionPerksEvents.1002 } } }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1002 } }
	}
	option = { name = OK default_hide_option = yes ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1011
	title = "UniqueAscensionPerksEvents.1011.Name"
	desc = "UniqueAscensionPerksEvents.1010.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_space_domestication
	location = capital_scope
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1011 } }
	}
	option = {
		name = "UniqueAscensionPerks.lets_see"
		trigger = { NOT = { has_active_event = { UniqueAscensionPerksEvents.1002 } } }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1002 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1011.b"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req02 NOT = { has_country_flag = space_domestication_resources_protocol } }
			custom_tooltip = { fail_text = "resources_gathering_protocol_req" can_resources_gathering_protocol = yes }
			custom_tooltip = {
				fail_text = no_fertilized_fleet_req # domesticated_alien_has_fertilized_fleet = yes
				event_target:domesticated_spaceborn_alien = { any_owned_fleet = { has_fleet_flag = domesticated_mother_fleet } }
			}
		}
		custom_tooltip = "resources_gathering_protocol_tooltip"
		resources_gathering_protocol_paying = yes
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1011 days = 180 }
			set_timed_country_flag = { flag = space_domestication_resources_protocol months = 6 }
			resources_gathering_protocol = yes
		}
	}
	option = { name = OK default_hide_option = yes ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1012
	title = "UniqueAscensionPerksEvents.1012.Name"
	desc = "UniqueAscensionPerksEvents.1010.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_space_domestication
	location = capital_scope
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1012 } }
	}
	option = {
		name = "UniqueAscensionPerks.lets_see"
		trigger = { NOT = { has_active_event = { UniqueAscensionPerksEvents.1002 } } }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1002 } }
	}
	option = { name = OK default_hide_option = yes ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1013
	title = "UniqueAscensionPerksEvents.1013.Name"
	desc = "UniqueAscensionPerksEvents.1010.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_space_domestication
	location = capital_scope
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1013 } }
	}
	option = {
		name = "UniqueAscensionPerks.lets_see"
		trigger = { NOT = { has_active_event = { UniqueAscensionPerksEvents.1002 } } }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1002 } }
	}
	option = { name = OK default_hide_option = yes ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1014
	title = "UniqueAscensionPerksEvents.1014.Name"
	desc = "UniqueAscensionPerksEvents.1010.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_space_domestication
	location = capital_scope
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1014 } }
	}
	option = {
		name = "UniqueAscensionPerks.lets_see"
		trigger = { NOT = { has_active_event = { UniqueAscensionPerksEvents.1002 } } }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1002 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1011.b"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1002.Req02 NOT = { has_country_flag = space_domestication_research_protocol } }
			custom_tooltip = { fail_text = "resources_gathering_protocol_req" can_research_assistance_protocol = yes }
		}
		custom_tooltip = "research_assistance_protocol_tooltip"
		resources_gathering_protocol_paying = yes
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1014 days = 180 }
			set_timed_country_flag = { flag = space_domestication_research_protocol months = 6 }
			research_assistance_protocol = yes
		}
	}
	option = { name = OK default_hide_option = yes ai_chance = { factor = 0.1 } default_hide_option = yes }
}

# on_monthly_pulse_country
country_event = {
	id = UniqueAscensionPerksEvents.1020
	hide_window = yes
	is_triggered_only = yes
	# mean_time_to_happen = { months = 2 } # days = 30
	trigger = {
		# is_ai = no
		has_ascension_perk = ap_space_domestication
		OR = {
			has_country_flag = space_domestication_military_protocol
			has_country_flag = space_domestication_security_protocol
		}
		any_relation = { has_relation_flag = { who = root flag = domesticated_spaceborn_alien } }
		count_owned_fleet = { count < 21 limit = { is_civilian = no has_fleet_flag = domesticated_military_fleet } }
	}
	immediate = {
		save_event_target_as = main_country
		if = { limit = { has_country_flag = killed_guardian NOT = { has_country_flag = has_killed_leviathan } }
			set_country_flag = has_killed_leviathan
		}
		country_event = { id = UniqueAscensionPerksEvents.1030 days = 2 }
		# space_domestication_constant_breed_event = yes
		# save_event_target_as = main_country
		random_relation = {
			limit = { is_country_type = domesticated_spaceborn_alien has_relation_flag = { who = root flag = domesticated_spaceborn_alien } }
			save_event_target_as = domesticated_spaceborn_alien
		}
		event_target:domesticated_spaceborn_alien = {
			if = {
				limit = { any_owned_fleet = { has_fleet_flag = domesticated_mother_fleet NOT = { has_fleet_flag = domesticated_mother_fleet_gave_bith } } }
				random_owned_fleet = {
					limit = { has_fleet_flag = domesticated_mother_fleet NOT = { has_fleet_flag = domesticated_mother_fleet_gave_bith } }
					save_event_target_as = domesticated_mother_fleet
					if = { limit = { root = { has_country_flag = space_domestication_amoeba } }
						set_timed_fleet_flag = { flag = domesticated_mother_fleet_gave_bith months = 2 }
					} else = { set_timed_fleet_flag = { flag = domesticated_mother_fleet_gave_bith months = 3 } }
				}
				create_fleet = {
					name = ""
					effect = {
						set_owner = event_target:domesticated_spaceborn_alien
						# space_domestication_spawn_default_fleet = yes
						if = {
							limit = { event_target:main_country = { has_country_flag = space_domestication_tiyanki } }
							while = { count = 5 create_ship = { name = "" design = "Demosticated Tiyanki Calf" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Demosticated Tiyanki Calf" } } }
							while = { count = 5 create_ship = { name = "" design = "Demosticated Tiyanki Bull" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Demosticated Tiyanki Bull" } } }
							while = { count = 5 create_ship = { name = "" design = "Demosticated Tiyanki Cow" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Demosticated Tiyanki Cow" } } }
						} else_if = {
							limit = { event_target:main_country = { has_country_flag = space_domestication_amoeba } }
							while = { count = 5 create_ship = { name = "" design = "Demosticated Amoeba" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Demosticated Amoeba" } } }
							while = { count = 5 create_ship = { name = "" design = "Demosticated Amoeba Mother" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Demosticated Amoeba Mother" } } }
						} else_if = {
							limit = { event_target:main_country = { has_country_flag = space_domestication_crystal } }
							while = { count = 5 create_ship = { name = "" design = "Domesticated Small Crystal Entity" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Domesticated Small Crystal Entity" } } }
							while = { count = 5 create_ship = { name = "" design = "Domesticated Medium Crystal Entity" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Domesticated Medium Crystal Entity" } } }
							while = { count = 5 create_ship = { name = "" design = "Domesticated Large Crystal Entity" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Domesticated Large Crystal Entity" } } }
						} else_if = {
							limit = { event_target:main_country = { has_country_flag = space_domestication_cloud } }
							while = { count = 5 create_ship = { name = "" design = NAME_Dom_Cloud } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = NAME_Dom_Cloud } } }
						} else_if = {
							limit = { event_target:main_country = { has_country_flag = space_domestication_drone } }
							while = { count = 5 create_ship = { name = "" design = "Reprogrammed Ancient Combat Drone" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Reprogrammed Ancient Combat Drone" } } }
							while = { count = 5 create_ship = { name = "" design = "Reprogrammed Ancient Destroyer Drone" } }
							while = { count = 5 random = { chance = 50 create_ship = { name = "" design = "Reprogrammed Ancient Destroyer Drone" } } }
						}
						set_location = { target = event_target:domesticated_mother_fleet distance = 5 angle = random }
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = self
						set_aggro_range = 5000
						set_formation_scale = 4.0
						save_event_target_as = domesticated_fleet
						set_fleet_flag = domesticated_fleet
						set_fleet_flag = domesticated_military_fleet
						if = { limit = { event_target:domesticated_spaceborn_alien = { has_country_flag = space_domestication_military_protocol } }
							set_name = "Domesticated Military Aliens"
						} else_if = { limit = { event_target:domesticated_spaceborn_alien = { has_country_flag = space_domestication_security_protocol } }
							set_name = "Domesticated Security Aliens"
						}
					}
				}
			}
		}
	}
}

country_event = {
	id = UniqueAscensionPerksEvents.1021
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		OR = {
			fromfrom = { has_fleet_flag = domesticated_fleet }
			fromfromfrom = { has_fleet_flag = domesticated_fleet }
		}
	}
	immediate = {
		fromfrom = {
			if = {
				limit = { has_fleet_flag = domesticated_fleet }
				remove_auto_move_target = yes
			}
		}
		fromfromfrom = {
			if = {
				limit = { has_fleet_flag = domesticated_fleet }
				remove_auto_move_target = yes
			}
		}
	}
}

# on_monthly_pulse
event = {
	id = UniqueAscensionPerksEvents.1022
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		any_playable_country = { has_ascension_perk = ap_space_domestication }
	}
	immediate = {
		random_playable_country = {
			limit = {
				has_ascension_perk = ap_space_domestication
				any_relation = { has_relation_flag = { who = prev flag = domesticated_spaceborn_alien } }
			}
			if = { limit = { is_subject = yes }
				country_event = { id = UniqueAscensionPerksEvents.1024 }
			} else = {
				country_event = { id = UniqueAscensionPerksEvents.1023 }
			}
		}
	}
}

# Control domesticated_spaceborn_alien
country_event = {
	id = UniqueAscensionPerksEvents.1023
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		random_relation = {
			limit = { has_relation_flag = { who = root flag = domesticated_spaceborn_alien } }
			save_event_target_as = domesticated_spaceborn_alien
			every_controlled_fleet = {
				limit = { is_ship_class = shipclass_starbase solar_system = { exists = space_owner space_owner = { is_same_empire = event_target:domesticated_spaceborn_alien } } }
				set_owner = root
				set_controller = root
			}
			root = {
				sync_subjects_virtual_relation = yes
			}
		}
	}
}

# Remove domesticated_spaceborn_alien
country_event = {
	id = UniqueAscensionPerksEvents.1024
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		# save_event_target_as = main_country
		random_relation = {
			limit = { has_relation_flag = { who = root flag = domesticated_spaceborn_alien } }
			# save_event_target_as = domesticated_spaceborn_alien
			every_controlled_fleet = { limit = { has_fleet_flag = domesticated_fleet } destroy_fleet = this }
			destroy_country = yes
		}
	}
}

# on_fleet_destroyed_perp
# fromfrom = fleet combatant
country_event = {
	id = UniqueAscensionPerksEvents.1025
	hide_window = yes
	is_triggered_only = yes
	trigger = { has_country_flag = domesticated_spaceborn_alien_cloud }
	immediate = {
		# space_domestication_cloud_multiplication = yes
		save_event_target_as = main_country
		random = {
			chance = 40
			# from = { save_event_target_as = notify_country }
			fromfrom = {
				save_event_target_as = spawn_location
				create_fleet = {
					name = "NAME_Effluvial_Offspring"
					effect = {
						set_owner = event_target:main_country
						while = { count = 3 create_ship = { name = "" design = NAME_Dom_Cloud } }
						while = { count = 2 random = { chance = 50 create_ship = { name = "" design = NAME_Dom_Cloud } } }
						set_location = { target = event_target:spawn_location distance = 5 angle = random }
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = self
						set_aggro_range = 5000
						set_formation_scale = 4.0
						save_event_target_as = domesticated_fleet
						set_fleet_flag = domesticated_fleet
						if = { limit = { event_target:spawn_location = { has_fleet_flag = domesticated_military_fleet } } set_fleet_flag = domesticated_military_fleet set_name = "Military Effluvial Offspring" }
						else_if = { limit = { event_target:spawn_location = { has_fleet_flag = domesticated_security_fleet } } set_fleet_flag = domesticated_security_fleet set_name = "Security Effluvial Offspring" }
					}
				}
			}
		}
	}
}

country_event = {
	id = UniqueAscensionPerksEvents.1030
	hide_window = yes
	is_triggered_only = yes
	# mean_time_to_happen = { days = 14 }
	trigger = {
		# is_ai = no
		has_ascension_perk = ap_space_domestication
		any_relation = { is_country_type = domesticated_spaceborn_alien has_relation_flag = { who = root flag = domesticated_spaceborn_alien } }
	}
	immediate =	{
		# space_domestication_idle_fleet_selection = yes
		save_event_target_as = main_country
		random_relation = {
			limit = {
				is_country_type = domesticated_spaceborn_alien
				has_country_flag = domesticated_spaceborn_alien
				has_relation_flag = { who = root flag = domesticated_spaceborn_alien }
			}
			save_event_target_as = domesticated_spaceborn_alien
			every_owned_fleet = { # Select Mother & Military Fleets
				limit = {
					has_fleet_flag = domesticated_fleet
					OR = {
						has_fleet_flag = domesticated_mother_fleet
						has_fleet_flag = domesticated_military_fleet
					}
					is_fleet_idle = yes
				}
				remove_fleet_flag = domesticated_mother_fleet_moving
				remove_fleet_flag = domesticated_military_fleet_hunting
				fleet_event = { id = UniqueAscensionPerksEvents.1031 days = 1 random = 2 }
			}
			every_owned_fleet = { # Select Security Fleets
				limit = {
					has_fleet_flag = domesticated_fleet
					has_fleet_flag = domesticated_security_fleet
					NOT = { has_fleet_flag = domesticated_security_fleet_defending_order }
					OR = {
						AND = {
							has_fleet_flag = domesticated_security_fleet_patroling
							OR = {
								is_fleet_idle = yes
								NOT = { has_fleet_flag = domesticated_security_fleet_patroling_order }
								root = { any_system_within_border = { any_ship_in_system = { is_valid_target_for_domesticated_aliens_security = yes } } }
							}
						}
						AND = {
							has_fleet_flag = domesticated_security_fleet_defending
							is_fleet_idle = yes
						}
						AND = {
							NOR = {
								has_fleet_flag = domesticated_security_fleet_patroling
								has_fleet_flag = domesticated_security_fleet_defending
							}
							is_fleet_idle = yes
						}
					}
				}
				fleet_event = { id = UniqueAscensionPerksEvents.1031 days = 1 random = 2 }
			}
		}
	}
}

fleet_event = {
	id = UniqueAscensionPerksEvents.1031
	hide_window = yes
	is_triggered_only = yes
	immediate =	{
		# space_domestication_idle_fleet_action = yes
		owner = {
			save_event_target_as = domesticated_spaceborn_alien
			if = { limit = { NOT = { exists = event_target:main_country } }
				if = { limit = { exists = from from = { reverse_has_relation_flag = { who = prev flag = domesticated_spaceborn_alien } } }
					from = { save_event_target_as = main_country }
				} else = {
					random_relation = {
						limit = { reverse_has_relation_flag = { who = prev flag = domesticated_spaceborn_alien } }
						save_event_target_as = main_country
					}
				}
			}
		}
		if = { # Mother Move
			limit = { has_fleet_flag = domesticated_mother_fleet NOT = { has_fleet_flag = domesticated_mother_fleet_moving_order } }
			event_target:main_country.capital_scope.solar_system = { random_system_planet = { save_event_target_as = domesticated_mother_fleet_destination } }
			save_event_target_as = domesticated_mother_fleet_moving
			set_fleet_flag = domesticated_mother_fleet_moving
			set_timed_fleet_flag = { flag = domesticated_mother_fleet_moving_order days = 45 }
			remove_auto_move_target = yes
			auto_move_to_planet = { target = event_target:domesticated_mother_fleet_destination clear_auto_move_on_arrival = no }
		} else_if = { # Offense
			limit = { has_fleet_flag = domesticated_military_fleet NOT = { has_fleet_flag = domesticated_military_fleet_hunting_order } }
			save_event_target_as = domesticated_military_fleet_hunting
			event_target:main_country = {
				if = {
					limit = { any_system_within_border = { any_neighbor_system = { NOT = { has_star_flag = guardian } any_ship_in_system = { is_valid_target_neigthbor_for_domesticated_aliens_military = yes } } } }
					random_system_within_border = {
						limit = { any_neighbor_system = { NOT = { has_star_flag = guardian } any_ship_in_system = { is_valid_target_neigthbor_for_domesticated_aliens_military = yes } } }
						random_neighbor_system = {
							limit = { NOT = { has_star_flag = guardian } any_ship_in_system = { is_valid_target_neigthbor_for_domesticated_aliens_military = yes } }
							random_fleet_in_system = {
								limit = { is_valid_target_neigthbor_for_domesticated_aliens_military = yes }
								save_event_target_as = domesticated_military_fleet_target
								random = { chance = 16 set_timed_fleet_flag = { flag = domesticated_military_fleet_target_no_more_hunters months = 6 } }
							}
						}
					}
				} else = {
					event_target:domesticated_military_fleet_hunting = {
						solar_system = {
							closest_system = {
								limit = {
									any_ship_in_system = { # is_valid_target_for_domesticated_aliens_military
										is_valid_target_neigthbor_for_domesticated_aliens_military = yes
										owner = {
											OR = {
												is_default_or_fallen = yes
												is_country_type = dormant_marauders
												is_country_type = ruined_marauders
												is_crisis_faction = yes
												# is_country_type = ally_faction mod?
												is_country_type = domesticated_spaceborn_alien
											}
										}
									}
								}
								random_fleet_in_system = {
									limit = { # is_valid_target_for_domesticated_aliens_military
										is_valid_target_neigthbor_for_domesticated_aliens_military = yes
										owner = {
											OR = {
												is_default_or_fallen = yes
												is_country_type = dormant_marauders
												is_country_type = ruined_marauders
												is_crisis_faction = yes
												# is_country_type = ally_faction mod?
												is_country_type = domesticated_spaceborn_alien
											}
										}
									}
									save_event_target_as = domesticated_military_fleet_target
									random = { chance = 25 set_timed_fleet_flag = { flag = domesticated_military_fleet_target_no_more_hunters months = 6 } }
								}
							}
						}
					}
				}
			}
			set_fleet_flag = domesticated_military_fleet_hunting
			set_timed_fleet_flag = { flag = domesticated_military_fleet_hunting_order days = 45 }
			remove_auto_move_target = yes
			auto_follow_fleet = { target = event_target:domesticated_military_fleet_target attack_fleet = yes }
		} else_if = { # Defense & Patrol
			limit = { has_fleet_flag = domesticated_security_fleet NOT = { has_fleet_flag = domesticated_security_fleet_defending_order } }
			if = {
				limit = { event_target:main_country = { any_system_within_border = { any_ship_in_system = { is_valid_target_for_domesticated_aliens_security = yes } } } }
				event_target:main_country = {
					random_system_within_border = {
						limit = { any_ship_in_system = { is_valid_target_for_domesticated_aliens_security = yes } }
						random_fleet_in_system = {
							limit = { is_valid_target_for_domesticated_aliens_security = yes }
							save_event_target_as = domesticated_security_fleet_defend_against
							random = { chance = 16 set_timed_fleet_flag = { flag = domesticated_security_fleet_defend_against_no_more_defenders months = 6 } }
						}
					}
				}
				save_event_target_as = domesticated_security_fleet_defending
				set_fleet_flag = domesticated_security_fleet_defending
				set_timed_fleet_flag = { flag = domesticated_security_fleet_defending_order days = 45 }
				remove_auto_move_target = yes
				auto_follow_fleet = { target = event_target:domesticated_security_fleet_defend_against attack_fleet = yes }
			} else = {
				event_target:main_country = { random_planet_within_border = { save_event_target_as = domesticated_security_fleet_destination } }
				save_event_target_as = domesticated_security_fleet_patroling
				set_fleet_flag = domesticated_security_fleet_patroling
				set_timed_fleet_flag = { flag = domesticated_security_fleet_defending_order days = 10 }
				set_timed_fleet_flag = { flag = domesticated_security_fleet_patroling_order months = 4 }
				auto_move_to_planet = { target = event_target:domesticated_security_fleet_destination clear_auto_move_on_arrival = no }
			}
		}
	}
}

country_event = {
	id = UniqueAscensionPerksEvents.1049
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = { has_country_flag = has_killed_leviathan }
		fromfromfrom = {
			OR = {
				is_ship_size = space_dragon_red
				is_ship_size = stellarite
				is_ship_size = sphere
				is_ship_size = station_xl
				is_ship_size = dimensional_horror
				is_ship_size = npc_warship_01
				is_ship_size = wraith_01_blue
				is_ship_size = wraith_01_red
				is_ship_size = wraith_01_yellow
				is_ship_size = leviathan_01_scavenger_bot
				is_ship_size = leviathan_01_elder_tiyanki
				is_ship_size = leviathan_01_voidspawn
			}
		}
	}
	immediate = { set_country_flag = has_killed_leviathan }
}

# country_event = {
# 	id = UniqueAscensionPerksEvents.1050
# 	hide_window = yes
# 	mean_time_to_happen = { months = 1 }
# 	trigger = {
# 		has_country_flag = killed_guardian
# 		NOT = { has_country_flag = has_killed_leviathan }
# 	}
# 	immediate = { set_country_flag = has_killed_leviathan }
# }

country_event = {
	id = UniqueAscensionPerksEvents.1051
	title = "ap_leviathan_master"
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	is_triggered_only = yes
	desc = {
		trigger = {
			text = "ap_leviathan_master_desc"
			text = newline
			text = "UniqueAscensionPerksEvents.1051.Desc"
		}
	}
	immediate = { get_capital_planet = yes }
	option = { name = EXCELLENT
		enable_special_project = { name = LEVIATHAN_MASTER location = event_target:capital_planet owner = root }
	}
}

country_event = {
	id = UniqueAscensionPerksEvents.1052
	title = "ap_leviathan_master"
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	desc = {
		trigger = {
			text = "UniqueAscensionPerksEvents.1052.Talk.1"
			text = newline
			text = "UniqueAscensionPerksEvents.1052.Talk.2"
		}
	}
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1052 UniqueAscensionPerksEvents.1056 } }
	}
	immediate = { set_country_flag = leviathan_master_project }
	option = {
		name = "UniqueAscensionPerksEvents.1052.a"
		add_resource = { food = -1 }
		custom_tooltip = "edict_contact_leviathan_master_unlock"
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1056 } set_country_flag = summoning_leviathan_present }
	}
	option = { name = "cara_home_exit" ai_chance = { factor = 0.1 } custom_tooltip = "edict_contact_leviathan_master_unlock" }
}

country_event = {
	id = UniqueAscensionPerksEvents.1055
	title = "ap_leviathan_master"
	desc = "UniqueAscensionPerksEvents.1055.Desc"
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1052.a"
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1056 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1055.Knowledge"
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req02 NOT = { has_modifier = leviathan_sharing_knowledge } } }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1057 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1055.Sacrifice"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req03 num_pops > 25 any_owned_planet = { num_pops > 19 } }
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req04 has_leviathan_master_sacrified_world_modifier = no }
		}
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1058 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1055.Attack"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req05 any_relation = { ROOT = { is_rival = prev } } }
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req06 NOT = { has_country_flag = leviathan_attacked_rival_cooldown } }
		}
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1059 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1055.Hell"
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req07 NOT = { has_country_flag = leviathan_master_provocation_delay } } }
		custom_tooltip = "leviathan_master_provocation"
		hidden_effect = {
			set_timed_country_flag = { flag = leviathan_master_provocation_delay days = 10 }# 30
			country_event = { id = UniqueAscensionPerksEvents.1060 }
			random_list = {
				4 = { set_country_flag = leviathan_master_provocation_ignore }
				4 = { set_country_flag = leviathan_master_provocation_occupied }
				2 = { set_country_flag = leviathan_master_provocation_amused }
				1 = { set_country_flag = leviathan_master_provocation_very_amused }
				4 = { set_country_flag = leviathan_master_provocation_pissed }
				200 = { set_country_flag = leviathan_master_provocation_very_pissed }
			}
		}
	}
	option = { name = "cara_home_exit" ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1056
	title = "UniqueAscensionPerksEvents.1056.Name"
	desc = "UniqueAscensionPerksEvents.1056.Desc"
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	location = event_target:capital_planet
	is_triggered_only = yes
	trigger = {
		NOR = {
			has_active_event = { UniqueAscensionPerksEvents.1056 }
			has_special_project = LEVIATHAN_MASTER_SUMMON
		}
	}
	immediate = { get_capital_planet = yes }
	option = {
		name = "leviathans.510.name"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 15000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -15000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_drake set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "NAME_Stellarite_Devourer"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 10000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -10000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_stellarite set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1056.Wraith"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 10000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -10000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_spectre set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "leviathans.540.name"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 10000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -10000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_dreadnought set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "NAME_Scavenger_Bot"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 10000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -10000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_scavenger set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "leviathans.556.name"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 5000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -5000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_matriarch set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "distar.5011.name"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 5000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -5000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_voidspawn set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "leviathans.535.name"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 10000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -10000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_machine set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = {
		name = "leviathans.525.name"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 15000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		custom_tooltip = "UniqueAscensionPerksEvents.1056.Horror.tooltip"
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -15000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON_DEFENSE location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_horror set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1061 } }
	}
	option = {
		name = "leviathans.515.name"
		allow = { OR = { has_country_flag = summoning_leviathan_present resource_stockpile_compare = { resource = food value > 15000 } } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req01 NOT = { has_country_flag = summoning_leviathan } } }
		custom_tooltip = "UniqueAscensionPerksEvents.1056.Horror.tooltip"
		if = { limit = { NOT = { has_country_flag = summoning_leviathan_present } } add_resource = { food = -15000 } }
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON_DEFENSE location = event_target:capital_planet owner = root }
		hidden_effect = { set_country_flag = summoning_leviathan_fortress set_country_flag = summoning_leviathan country_event = { id = UniqueAscensionPerksEvents.1061 } }
	}
	option = { name = BACK hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1055 } } ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1061
	title = "ap_leviathan_master"
	desc = "UniqueAscensionPerksEvents.1061.Desc"
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	is_triggered_only = yes
	immediate = {
		random_system_within_border = { limit = { exists = starbase starbase = { has_starbase_size > starbase_starport } }
			save_event_target_as = starbase_target_1
			root = { random_system_within_border = { limit = { exists = starbase starbase = { has_starbase_size > starbase_starport } NOT = { is_same_value = event_target:starbase_target_1 } }
				save_event_target_as = starbase_target_2
				root = { random_system_within_border = { limit = { exists = starbase starbase = { has_starbase_size > starbase_starport } NOR = { is_same_value = event_target:starbase_target_1 is_same_value = event_target:starbase_target_2 } }
					save_event_target_as = starbase_target_3
					root = { random_system_within_border = { limit = { exists = starbase starbase = { has_starbase_size > starbase_starport } NOR = { is_same_value = event_target:starbase_target_1 is_same_value = event_target:starbase_target_2 is_same_value = event_target:starbase_target_3 } }
						save_event_target_as = starbase_target_4
						root = { random_system_within_border = { limit = { exists = starbase starbase = { has_starbase_size > starbase_starport } NOR = { is_same_value = event_target:starbase_target_1 is_same_value = event_target:starbase_target_2 is_same_value = event_target:starbase_target_3 is_same_value = event_target:starbase_target_4 } }
							save_event_target_as = starbase_target_5
							root = { random_system_within_border = { limit = { exists = starbase starbase = { has_starbase_size > starbase_starport } NOR = { is_same_value = event_target:starbase_target_1 is_same_value = event_target:starbase_target_2 is_same_value = event_target:starbase_target_3 is_same_value = event_target:starbase_target_4 is_same_value = event_target:starbase_target_5 } } save_event_target_as = starbase_target_6 } }
						} }
					} }
				} }
			} }
		}
	}
	option = {
		name = UniqueAscensionPerksEvents.1061.Starbase.1
		trigger = { exists = event_target:starbase_target_1.star }
		custom_tooltip = "UniqueAscensionPerksEvents.1061.Starbase.1.tooltip"
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON_DEFENSE location = event_target:starbase_target_1.star owner = root }
		hidden_effect = { event_target:starbase_target_1.star = { set_planet_flag = leviathan_summon_defense_project } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1061.Starbase.2
		trigger = { exists = event_target:starbase_target_2.star }
		custom_tooltip = "UniqueAscensionPerksEvents.1061.Starbase.1.tooltip"
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON_DEFENSE location = event_target:starbase_target_2.star owner = root }
		hidden_effect = { event_target:starbase_target_2.star = { set_planet_flag = leviathan_summon_defense_project } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1061.Starbase.3
		trigger = { exists = event_target:starbase_target_3.star }
		custom_tooltip = "UniqueAscensionPerksEvents.1061.Starbase.1.tooltip"
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON_DEFENSE location = event_target:starbase_target_3.star owner = root }
		hidden_effect = { event_target:starbase_target_3.star = { set_planet_flag = leviathan_summon_defense_project } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1061.Starbase.4
		trigger = { exists = event_target:starbase_target_4.star }
		custom_tooltip = "UniqueAscensionPerksEvents.1061.Starbase.1.tooltip"
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON_DEFENSE location = event_target:starbase_target_4.star owner = root }
		hidden_effect = { event_target:starbase_target_4.star = { set_planet_flag = leviathan_summon_defense_project } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1061.Starbase.5
		trigger = { exists = event_target:starbase_target_5.star }
		custom_tooltip = "UniqueAscensionPerksEvents.1061.Starbase.1.tooltip"
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON_DEFENSE location = event_target:starbase_target_5.star owner = root }
		hidden_effect = { event_target:starbase_target_5.star = { set_planet_flag = leviathan_summon_defense_project } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1061.Starbase.6
		trigger = { exists = event_target:starbase_target_6.star }
		custom_tooltip = "UniqueAscensionPerksEvents.1061.Starbase.1.tooltip"
		enable_special_project = { name = LEVIATHAN_MASTER_SUMMON_DEFENSE location = event_target:starbase_target_6.star owner = root }
		hidden_effect = { event_target:starbase_target_6.star = { set_planet_flag = leviathan_summon_defense_project } }
	}
	option = { name = "UniqueAscensionPerksEvents.1061.Starbase.Another" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1061 } } ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1057
	title = "ap_leviathan_master"
	desc = "UniqueAscensionPerksEvents.1057.Desc"
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	is_triggered_only = yes
	option = {
		name = "UniqueAscensionPerksEvents.1057.a"
		allow = {
			resource_stockpile_compare = { resource = food value > 1500 }
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req02 NOT = { has_modifier = leviathan_sharing_knowledge } }
		}
		add_resource = { food = -1500 }
		add_modifier = { modifier = leviathan_sharing_knowledge years = 10 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1055 } }
	}
	option = { name = BACK hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1055 } } ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1058
	title = "UniqueAscensionPerksEvents.1058.Name"
	desc = "UniqueAscensionPerksEvents.1058.Desc"
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	is_triggered_only = yes
	immediate = {
		random_owned_planet = { limit = { num_pops > 19 }
			save_event_target_as = planet_target_1
			root = { random_owned_planet = { limit = { num_pops > 19 NOT = { is_same_value = event_target:planet_target_1 } }
				save_event_target_as = planet_target_2
				root = { random_owned_planet = { limit = { num_pops > 19 NOR = { is_same_value = event_target:planet_target_1 is_same_value = event_target:planet_target_2 } }
					save_event_target_as = planet_target_3
					root = { random_owned_planet = { limit = { num_pops > 19 NOR = { is_same_value = event_target:planet_target_1 is_same_value = event_target:planet_target_2 is_same_value = event_target:planet_target_3 } }
						save_event_target_as = planet_target_4
						root = { random_owned_planet = { limit = { num_pops > 19 NOR = { is_same_value = event_target:planet_target_1 is_same_value = event_target:planet_target_2 is_same_value = event_target:planet_target_3 is_same_value = event_target:planet_target_4 } }
							save_event_target_as = planet_target_5
							root = { random_owned_planet = { limit = { num_pops > 19 NOR = { is_same_value = event_target:planet_target_1 is_same_value = event_target:planet_target_2 is_same_value = event_target:planet_target_3 is_same_value = event_target:planet_target_4 is_same_value = event_target:planet_target_5 } } save_event_target_as = planet_target_6 } }
						} }
					} }
				} }
			} }
		}
	}
	after = {
		if = { limit = { exists = event_target:planet_target }
			hidden_effect = {
				event_target:planet_target = {
					# leviathan_master_consume_planet = yes
					planet_event = { id = UniqueAscensionPerksEvents.1072 }
					every_owned_pop = { kill_pop = yes }
					destroy_colony = yes
					change_pc = pc_molten
				}
			}
			# leviathan_master_gives_modifier = yes
			random_list = {
				10 = { add_modifier = { modifier = leviathan_spell_energy years = 20 } }
				10 = { add_modifier = { modifier = leviathan_spell_minerals years = 20 } }
				10 = { add_modifier = { modifier = leviathan_spell_food years = 20 } }
				10 = { add_modifier = { modifier = leviathan_spell_defense years = 20 } }
				10 = { add_modifier = { modifier = leviathan_spell_offense years = 20 } }
			}
		}
	}
	option = {
		name = UniqueAscensionPerksEvents.1058.Planet.1
		trigger = { exists = event_target:planet_target_1 }
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req04 has_leviathan_master_sacrified_world_modifier = no } }
		custom_tooltip = "UniqueAscensionPerksEvents.1058.Planet.1.tooltip"
		hidden_effect = { event_target:planet_target_1 = { save_event_target_as = planet_target } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1058.Planet.2
		trigger = { exists = event_target:planet_target_2 }
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req04 has_leviathan_master_sacrified_world_modifier = no } }
		custom_tooltip = "UniqueAscensionPerksEvents.1058.Planet.1.tooltip"
		hidden_effect = { event_target:planet_target_2 = { save_event_target_as = planet_target } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1058.Planet.3
		trigger = { exists = event_target:planet_target_3 }
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req04 has_leviathan_master_sacrified_world_modifier = no } }
		custom_tooltip = "UniqueAscensionPerksEvents.1058.Planet.1.tooltip"
		hidden_effect = { event_target:planet_target_3 = { save_event_target_as = planet_target } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1058.Planet.4
		trigger = { exists = event_target:planet_target_4 }
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req04 has_leviathan_master_sacrified_world_modifier = no } }
		custom_tooltip = "UniqueAscensionPerksEvents.1058.Planet.1.tooltip"
		hidden_effect = { event_target:planet_target_4 = { save_event_target_as = planet_target } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1058.Planet.5
		trigger = { exists = event_target:planet_target_5 }
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req04 has_leviathan_master_sacrified_world_modifier = no } }
		custom_tooltip = "UniqueAscensionPerksEvents.1058.Planet.1.tooltip"
		hidden_effect = { event_target:planet_target_5 = { save_event_target_as = planet_target } }
	}
	option = {
		name = UniqueAscensionPerksEvents.1058.Planet.6
		trigger = { exists = event_target:planet_target_6 }
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req04 has_leviathan_master_sacrified_world_modifier = no } }
		custom_tooltip = "UniqueAscensionPerksEvents.1058.Planet.1.tooltip"
		hidden_effect = { event_target:planet_target_6 = { save_event_target_as = planet_target } }
	}
	option = { name = BACK hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1055 } } ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1059
	title = "UniqueAscensionPerksEvents.1059.Name"
	desc = "UniqueAscensionPerksEvents.1059.Desc"
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	is_triggered_only = yes
	immediate = {
		random_relation = { limit = { ROOT = { is_rival = prev } }
			save_event_target_as = rival_target_1
			ROOT = { random_relation = { limit = { ROOT = { is_rival = prev } NOT = { is_same_empire = event_target:rival_target_1 } }
				save_event_target_as = rival_target_2
				ROOT = { random_relation = { limit = { ROOT = { is_rival = prev } NOR = { is_same_empire = event_target:rival_target_1 is_same_empire = event_target:rival_target_2 } }
					save_event_target_as = rival_target_3
					ROOT = { random_relation = { limit = { ROOT = { is_rival = prev } NOR = { is_same_empire = event_target:rival_target_1 is_same_empire = event_target:rival_target_2 is_same_empire = event_target:rival_target_3 } } save_event_target_as = rival_target_4 } }
				} }
			} }
		}
	}
	after = {
		hidden_effect = {
			if = { limit = { exists = event_target:target_country }
				event_target:target_country = {
					country_event = { id = UniqueAscensionPerksEvents.1073 }
					# leviathan_master_attack_rivals = yes
					if = { limit = { NOT = { exists = event_target:leviathan_master_country } }
						create_leviathan_master_country = yes
					}
					set_faction_hostility = { target = event_target:leviathan_master_country set_hostile = yes set_neutral = no set_friendly = no }
					while = { count = 3 leviathan_master_enraged_leviathan = yes }
				}
				country_event = { id = UniqueAscensionPerksEvents.1055 }
			}
		}
	}
	option = {
		name = UniqueAscensionPerksEvents.1059.Target.1
		trigger = { exists = event_target:rival_target_1 }
		allow = { num_pops > 10 resource_stockpile_compare = { resource = exotic_gases value > 3000 } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req06 NOT = { has_country_flag = leviathan_attacked_rival_cooldown } } }
		add_resource = { exotic_gases = -3000 }
		while = { count = 10 random_owned_pop = { kill_pop = yes } }
		set_timed_country_flag = { flag = leviathan_attacked_rival_cooldown years = 5 }
		event_target:rival_target_1 = { save_event_target_as = target_country }

	}
	option = {
		name = UniqueAscensionPerksEvents.1059.Target.2
		trigger = { exists = event_target:rival_target_2 }
		allow = { num_pops > 10 resource_stockpile_compare = { resource = exotic_gases value > 3000 } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req06 NOT = { has_country_flag = leviathan_attacked_rival_cooldown } } }
		add_resource = { exotic_gases = -3000 }
		while = { count = 10 random_owned_pop = { kill_pop = yes } }
		set_timed_country_flag = { flag = leviathan_attacked_rival_cooldown years = 5 }
		event_target:rival_target_2 = { save_event_target_as = target_country }
	}
	option = {
		name = UniqueAscensionPerksEvents.1059.Target.3
		trigger = { exists = event_target:rival_target_3 }
		allow = { num_pops > 10 resource_stockpile_compare = { resource = exotic_gases value > 3000 } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req06 NOT = { has_country_flag = leviathan_attacked_rival_cooldown } } }
		add_resource = { exotic_gases = -3000 }
		while = { count = 10 random_owned_pop = { kill_pop = yes } }
		set_timed_country_flag = { flag = leviathan_attacked_rival_cooldown years = 5 }
		event_target:rival_target_3 = { save_event_target_as = target_country }
	}
	option = {
		name = UniqueAscensionPerksEvents.1059.Target.4
		trigger = { exists = event_target:rival_target_4 }
		allow = { num_pops > 10 resource_stockpile_compare = { resource = exotic_gases value > 3000 } custom_tooltip = { fail_text = UniqueAscensionPerksEvents.1055.Req06 NOT = { has_country_flag = leviathan_attacked_rival_cooldown } } }
		add_resource = { exotic_gases = -3000 }
		while = { count = 10 random_owned_pop = { kill_pop = yes } }
		set_timed_country_flag = { flag = leviathan_attacked_rival_cooldown years = 5 }
		event_target:rival_target_4 = { save_event_target_as = target_country }
	}
	option = { name = BACK hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1055 } } ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.1060
	title = "ap_leviathan_master"
	desc = {
		trigger = {
			success_text = { text = "UniqueAscensionPerksEvents.1060.Ignore" has_country_flag = leviathan_master_provocation_ignore }
			success_text = { text = "UniqueAscensionPerksEvents.1060.Occupied" has_country_flag = leviathan_master_provocation_occupied }
			success_text = { text = "UniqueAscensionPerksEvents.1060.Amused" has_country_flag = leviathan_master_provocation_amused }
			success_text = { text = "UniqueAscensionPerksEvents.1060.VeryAmused" has_country_flag = leviathan_master_provocation_very_amused }
			success_text = { text = "UniqueAscensionPerksEvents.1060.Pissed" has_country_flag = leviathan_master_provocation_pissed }
			success_text = { text = "UniqueAscensionPerksEvents.1060.VeryPissed" has_country_flag = leviathan_master_provocation_very_pissed }
		}
	}
	show_sound = event_mystic_reveal
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = leviathan_master_room }
	is_triggered_only = yes
	option = {
		name = "UniqueAscensionPerksEvents.1060.a"
		trigger = { has_country_flag = leviathan_master_provocation_ignore }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1055 } remove_country_flag = leviathan_master_provocation_ignore }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1060.b"
		trigger = { has_country_flag = leviathan_master_provocation_occupied }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1055 } remove_country_flag = leviathan_master_provocation_occupied }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1060.c"
		trigger = { has_country_flag = leviathan_master_provocation_amused }
		country_event = { id = UniqueAscensionPerksEvents.1055 }
		random_list = {
			30 = { add_resource = { food = 5000 } }
			30 = { add_resource = { minerals = 5000 } }
			30 = { add_resource = { energy = 5000 } }
			20 = { add_resource = { alloys = 5000 } }
			20 = { add_resource = { consumer_goods = 5000 } }
			10 = { add_resource = { volatile_motes = 2000 } }
			10 = { add_resource = { exotic_gases = 2000 } }
			10 = { add_resource = { rare_crystals = 2000 } }
			5 = { add_resource = { sr_living_metal = 1000 } }
			5 = { add_resource = { sr_dark_matter = 1000 } }
			5 = { add_resource = { sr_zro = 1000 } }
		}
		hidden_effect = { remove_country_flag = leviathan_master_provocation_amused }
	}
	option = {
		name = "UniqueAscensionPerksEvents.1060.d"
		trigger = { has_country_flag = leviathan_master_provocation_very_amused }
		add_resource = { food = -1 }
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1056 }
			remove_country_flag = leviathan_master_provocation_very_amused
			set_country_flag = summoning_leviathan_present
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.1060.e"
		trigger = { has_country_flag = leviathan_master_provocation_pissed }
		hidden_effect = {
			country_event = { id = UniqueAscensionPerksEvents.1055 }
			while = { count = 2 random_owned_leader = { kill_leader = { show_notification = yes } } }
			remove_country_flag = leviathan_master_provocation_pissed
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.1060.f"
		trigger = { has_country_flag = leviathan_master_provocation_very_pissed }
		hidden_effect = {
			remove_country_flag = leviathan_master_provocation_very_pissed
			# leviathan_master_angry_wrath = {
			country_event = { id = UniqueAscensionPerksEvents.1071 }
			# leviathan_master_attack_rivals = yes
			if = { limit = { NOT = { exists = event_target:leviathan_master_country } }
				create_leviathan_master_country = yes
			}
			set_faction_hostility = { target = event_target:leviathan_master_country set_hostile = yes set_neutral = no set_friendly = no }
			while = { count = 3 leviathan_master_enraged_leviathan = yes }
		}
	}
	option = {
		name = BACK
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.1055 } } ai_chance = { factor = 0.1 } default_hide_option = yes
	}
}

country_event = {
	id = UniqueAscensionPerksEvents.1070
	title = "UniqueAscensionPerksEvents.1070.Name"
	desc = "UniqueAscensionPerksEvents.1070.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_leviathan_master
	location = event_target:capital_planet
	is_triggered_only = yes
	immediate = { get_capital_planet = yes }
	after = {
		hidden_effect = {
			# leviathan_clear_summoning_flags
			remove_country_flag = summoning_leviathan
			remove_country_flag = summoning_leviathan_present
			# remove_country_flag = summoning_leviathan_drake
			# remove_country_flag = summoning_leviathan_stellarite
			# remove_country_flag = summoning_leviathan_spectre
			# remove_country_flag = summoning_leviathan_dreadnought
			# remove_country_flag = summoning_leviathan_scavenger
			# remove_country_flag = summoning_leviathan_matriarch
			# remove_country_flag = summoning_leviathan_voidspawn
			# remove_country_flag = summoning_leviathan_machine
		}
	}
	option = {
		name = EXCELLENT
		add_monthly_resource_mult = { resource = society_research value = 8 min = 2000 max = 3000 }
		# leviathan_master_summon_leviathan = {
		hidden_effect = {
			create_fleet = {
				name = "Summoned Leviathan"
				settings = { is_boss = yes spawn_debris = no can_upgrade = no can_change_composition = no uses_naval_capacity = no can_disband = no }
				effect = {
					set_owner = root
					if		= { limit = { ROOT = { has_country_flag = summoning_leviathan_drake }		} root = { remove_country_flag = summoning_leviathan_drake			} create_ship = { name = "Summoned Ether Drake"				design = "Summoned Ether Drake"			effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
					else_if = { limit = { ROOT = { has_country_flag = summoning_leviathan_stellarite }	} root = { remove_country_flag = summoning_leviathan_stellarite		} create_ship = { name = "Summoned Stellarite Devourer"		design = "Summoned Stellarite Devourer"	effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
					else_if = { limit = { ROOT = { has_country_flag = summoning_leviathan_spectre }		} root = { remove_country_flag = summoning_leviathan_spectre		} create_ship = { name = "Summoned Spectral Wraith"			design = "Summoned Spectral Wraith"		effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
					else_if = { limit = { ROOT = { has_country_flag = summoning_leviathan_dreadnought }	} root = { remove_country_flag = summoning_leviathan_dreadnought	} create_ship = { name = "Summoned Automated Dreadnought"	design = "Summoned Automated Dreadnought" effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } graphical_culture = "npf_01" } }
					else_if = { limit = { ROOT = { has_country_flag = summoning_leviathan_scavenger }	} root = { remove_country_flag = summoning_leviathan_scavenger		} create_ship = { name = "Summoned Scavenger Bot"			design = "Summoned Scavenger Bot"		effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
					else_if = { limit = { ROOT = { has_country_flag = summoning_leviathan_matriarch }	} root = { remove_country_flag = summoning_leviathan_matriarch		} create_ship = { name = "Summoned Tiyanki Matriarch"		design = "Summoned Tiyanki Matriarch"	effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
					else_if = { limit = { ROOT = { has_country_flag = summoning_leviathan_voidspawn }	} root = { remove_country_flag = summoning_leviathan_voidspawn		} create_ship = { name = "Summoned Voidspawn"				design = "Summoned Voidspawn"			effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
					else_if = { limit = { ROOT = { has_country_flag = summoning_leviathan_machine }		} root = { remove_country_flag = summoning_leviathan_machine		} create_ship = { name = "Summoned Infinity Machine"		design = "Summoned Infinity Machine"	effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } graphical_culture = "techno" } }
					set_location = { target = event_target:capital_planet distance = 5 angle = random }
					set_fleet_stance = aggressive
					set_aggro_range_measure_from = self
					set_aggro_range = 1000
				}
			}
		}
	}
}

country_event = {
	id = UniqueAscensionPerksEvents.1071
	title = "UniqueAscensionPerksEvents.1072.Name"
	desc = "UniqueAscensionPerksEvents.1071.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_leviathan_master
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1071 } }
	}
	option = { name = BATTLESTATIONS }
}

planet_event = {
	id = UniqueAscensionPerksEvents.1072
	title = "UniqueAscensionPerksEvents.1072.Name"
	desc = "UniqueAscensionPerksEvents.1072.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_leviathan_master
	is_triggered_only = yes
	trigger = {
		NAND = {
			exists = from
			from = { has_active_event = { UniqueAscensionPerksEvents.1072 } }
		}
	}
	location = root
	option = { name = OK }
}

country_event = {
	id = UniqueAscensionPerksEvents.1073
	title = "UniqueAscensionPerksEvents.1072.Name"
	desc = "UniqueAscensionPerksEvents.1073.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_leviathan_master
	is_triggered_only = yes
	trigger = {
		NOT = { has_active_event = { UniqueAscensionPerksEvents.1073 } }
	}
	option = { name = BATTLESTATIONS }
}

country_event = {
	id = UniqueAscensionPerksEvents.1074
	title = "UniqueAscensionPerksEvents.1070.Name"
	desc = "UniqueAscensionPerksEvents.1070.Desc"
	show_sound = event_mystic_reveal
	picture = GFX_evt_leviathan_master
	location = event_target:look_location
	is_triggered_only = yes
	immediate = {
		random_planet_within_border = {
			limit = { has_planet_flag = leviathan_summon_defense_project }
			save_event_target_as = look_location
		}
		save_event_target_as = main_country
	}
	after = {
		hidden_effect = {
			# leviathan_clear_summoning_flags
			remove_country_flag = summoning_leviathan
			remove_country_flag = summoning_leviathan_present
		}
	}
	option = {
		name = EXCELLENT
		add_monthly_resource_mult = { resource = society_research value = 8 min = 2000 max = 3000 }
		# leviathan_master_summon_leviathan_defense = yes
		hidden_effect = {
			random_planet_within_border = { limit = { has_planet_flag = leviathan_summon_defense_project } remove_planet_flag = leviathan_summon_defense_project save_event_target_as = spawn_location_leviathan }
			create_domestication_spaceborn_alien_country = yes
			event_target:domesticated_spaceborn_alien = {
				create_fleet = {
					name = "Summoned Leviathan"
					settings = { is_boss = yes spawn_debris = no }
					effect = {
						set_owner = event_target:domesticated_spaceborn_alien
						if = { limit = { event_target:main_country = { has_country_flag = summoning_leviathan_horror } }
							event_target:main_country = { remove_country_flag = summoning_leviathan_horror }
							create_ship = { name = "Summoned Dimensional Horror" design = "NAME_Dimensional_Horror" effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } }
						}
						# else_if = { limit = { event_target:main_country = { has_country_flag = summoning_leviathan_fortress } } create_ship = { name = "Summoned Enigmatic Fortress" design = "NAME_Ancient_Vault" effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
						else_if = { limit = { event_target:main_country = { has_country_flag = summoning_leviathan_fortress } }
							event_target:main_country = { remove_country_flag = summoning_leviathan_fortress }
							create_ship = { name = "Summoned Enigmatic Fortress" design = "NAME_Ancient_Vault" graphical_culture = "ancient" effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } }
							while = { count = 2 create_ship = { name = "Summoned Enigmatic Fortress" design = "NAME_Ancient_Guardian"	graphical_culture = "ancient" effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
							while = { count = 2 create_ship = { name = "Summoned Enigmatic Fortress" design = "NAME_Ancient_Warden"		graphical_culture = "ancient" effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
							while = { count = 4 create_ship = { name = "Summoned Enigmatic Fortress" design = "NAME_Ancient_Defender"	graphical_culture = "ancient" effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
							while = { count = 8 create_ship = { name = "Summoned Enigmatic Fortress" design = "NAME_Ancient_Sentinel"	graphical_culture = "ancient" effect = { set_ship_flag = summoned_leviathan add_modifier = { modifier = summoned_leviathan } } } }
						}
						set_formation_scale = 3.0
						set_location = { target = event_target:spawn_location_leviathan distance = 100 angle = random }
						set_fleet_stance = aggressive
						set_aggro_range_measure_from = self
						set_aggro_range = 1000
					}
				}
			}
		}
	}
}
