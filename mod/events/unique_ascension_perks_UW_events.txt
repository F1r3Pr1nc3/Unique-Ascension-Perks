namespace = UniqueAscensionPerksEvents
######################################
#									 #
########## Underworld Access ##########
#									 #
######################################

country_event = {
	id = UniqueAscensionPerksEvents.370
	title = "ap_underworld"
	desc = "ap_underworld_desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = underworld_room }
	is_triggered_only = yes
	option = { name = EXCELLENT hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}

country_event = {
	id = UniqueAscensionPerksEvents.371
	title = "edict_underworld_menu"
	desc = "UniqueAscensionPerksEvents.371.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = underworld_room }
	is_triggered_only = yes
	option = {
		name = UniqueAscensionPerksEvents.371.Smuggler
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.371.Req01 NOR = { has_country_flag = underworld_smuggler_food has_country_flag = underworld_smuggler_minerals has_country_flag = underworld_smuggler_alloys has_country_flag = underworld_smuggler_consumers } } }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.372 } }
	}
	option = { name = UniqueAscensionPerksEvents.371.Crime hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.375 } } }
	option = { name = UniqueAscensionPerksEvents.371.Pirate hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.379 } } }
	option = {
		name = "UniqueAscensionPerksEvents.383.Name"
		allow = { host_has_dlc = "Apocalypse" }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.383 } }
	}
	option = {
		name = UniqueAscensionPerksEvents.371.Slaver
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.371.Req02 NOT = { has_country_flag = underworld_slaves_cooldown } }
			OR = { has_valid_civic = civic_barbaric_despoilers has_ascension_perk = ap_nihilistic_acquisition has_policy_flag = slavery_allowed is_gestalt = yes }
		}
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.388 } }
	}
	# option = { name = UniqueAscensionPerksEvents.371.Country hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.10000 } } }
	option = {
		name = UniqueAscensionPerksEvents.371.Fallen
		allow = { custom_tooltip = { fail_text = UniqueAscensionPerksEvents.371.Req03 NOT = { has_country_flag = underworld_fallen_empire_cooldown } } has_ascension_perk = ap_fallen_disciple }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.392 } }
	}
	option = { name = EXIT ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.372
	title = "UniqueAscensionPerksEvents.373.Name"
	desc = "UniqueAscensionPerksEvents.372.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	option = { name = UniqueAscensionPerksEvents.372.Food allow = { resource_stockpile_compare = { resource = treasures value > 500 } } add_resource = { treasures = -500 } hidden_effect = { set_country_flag = underworld_smuggler_food country_event = { id = UniqueAscensionPerksEvents.373 } country_event = { id = UniqueAscensionPerksEvents.374 days = 720 random = 720 } } }
	option = { name = UniqueAscensionPerksEvents.372.Minerals allow = { resource_stockpile_compare = { resource = treasures value > 750 } } add_resource = { treasures = -750 } hidden_effect = { set_country_flag = underworld_smuggler_minerals country_event = { id = UniqueAscensionPerksEvents.373 } country_event = { id = UniqueAscensionPerksEvents.374 days = 720 random = 720 } } }
	option = { name = UniqueAscensionPerksEvents.372.Alloys allow = { resource_stockpile_compare = { resource = treasures value > 1500 } } add_resource = { treasures = -1500 } hidden_effect = { set_country_flag = underworld_smuggler_alloys country_event = { id = UniqueAscensionPerksEvents.373 } country_event = { id = UniqueAscensionPerksEvents.374 days = 720 random = 720 } } }
	option = { name = UniqueAscensionPerksEvents.372.Consumers allow = { resource_stockpile_compare = { resource = treasures value > 1300 } } add_resource = { treasures = -1300 } hidden_effect = { set_country_flag = underworld_smuggler_consumers country_event = { id = UniqueAscensionPerksEvents.373 } country_event = { id = UniqueAscensionPerksEvents.374 days = 720 random = 720 } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}

country_event = {
	id = UniqueAscensionPerksEvents.373
	title = "UniqueAscensionPerksEvents.373.Name"
	desc = "UniqueAscensionPerksEvents.373.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	option = { name = GOODBYE ai_chance = { factor = 0.1 } hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}

country_event = {
	id = UniqueAscensionPerksEvents.374
	title = "UniqueAscensionPerksEvents.373.Name"
	desc = "UniqueAscensionPerksEvents.374.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	immediate = {
		# underworld_smuggler_resources_loot_selection =
		if = { limit = { has_country_flag = underworld_smuggler_food }
			remove_country_flag = underworld_smuggler_food
			random_list = {
				10 = { set_country_flag = underworld_smuggler_food_1 }
				20 = { set_country_flag = underworld_smuggler_food_2 }
				30 = { set_country_flag = underworld_smuggler_food_3 }
				20 = { set_country_flag = underworld_smuggler_food_4 }
				10 = { set_country_flag = underworld_smuggler_food_5 }
			}
		}
		if = { limit = { has_country_flag = underworld_smuggler_minerals }
			remove_country_flag = underworld_smuggler_minerals
			random_list = {
				10 = { set_country_flag = underworld_smuggler_minerals_1 }
				20 = { set_country_flag = underworld_smuggler_minerals_2 }
				30 = { set_country_flag = underworld_smuggler_minerals_3 }
				20 = { set_country_flag = underworld_smuggler_minerals_4 }
				10 = { set_country_flag = underworld_smuggler_minerals_5 }
			}
		}
		if = { limit = { has_country_flag = underworld_smuggler_alloys }
			remove_country_flag = underworld_smuggler_alloys
			random_list = {
				10 = { set_country_flag = underworld_smuggler_alloys_1 }
				20 = { set_country_flag = underworld_smuggler_alloys_2 }
				30 = { set_country_flag = underworld_smuggler_alloys_3 }
				20 = { set_country_flag = underworld_smuggler_alloys_4 }
				10 = { set_country_flag = underworld_smuggler_alloys_5 }
			}
		}
		if = { limit = { has_country_flag = underworld_smuggler_consumers }
			remove_country_flag = underworld_smuggler_consumers
			random_list = {
				10 = { set_country_flag = underworld_smuggler_consumers_1 }
				20 = { set_country_flag = underworld_smuggler_consumers_2 }
				30 = { set_country_flag = underworld_smuggler_consumers_3 }
				20 = { set_country_flag = underworld_smuggler_consumers_4 }
				10 = { set_country_flag = underworld_smuggler_consumers_5 }
			}
		}
	}
	option = {
		name = OK
		# underworld_smuggler_resources_loot_collection = yes
		if = { limit = { has_country_flag = underworld_smuggler_food_1 } remove_country_flag = underworld_smuggler_food_1 add_monthly_resource_mult = { resource = food value = 2 min = 20 max = 50 } }
		if = { limit = { has_country_flag = underworld_smuggler_food_2 } remove_country_flag = underworld_smuggler_food_2 add_monthly_resource_mult = { resource = food value = 4 min = 100 max = 500 } }
		if = { limit = { has_country_flag = underworld_smuggler_food_3 } remove_country_flag = underworld_smuggler_food_3 add_monthly_resource_mult = { resource = food value = 6 min = 1000 max = 2000 } }
		if = { limit = { has_country_flag = underworld_smuggler_food_4 } remove_country_flag = underworld_smuggler_food_4 add_monthly_resource_mult = { resource = food value = 8 min = 2500 max = 4000 } }
		if = { limit = { has_country_flag = underworld_smuggler_food_5 } remove_country_flag = underworld_smuggler_food_5 add_monthly_resource_mult = { resource = food value = 10 min = 6000 max = 10000 } }
		if = { limit = { has_country_flag = underworld_smuggler_minerals_1 } remove_country_flag = underworld_smuggler_minerals_1 add_monthly_resource_mult = { resource = minerals value = 2 min = 20 max = 50 } }
		if = { limit = { has_country_flag = underworld_smuggler_minerals_2 } remove_country_flag = underworld_smuggler_minerals_2 add_monthly_resource_mult = { resource = minerals value = 4 min = 100 max = 500 } }
		if = { limit = { has_country_flag = underworld_smuggler_minerals_3 } remove_country_flag = underworld_smuggler_minerals_3 add_monthly_resource_mult = { resource = minerals value = 6 min = 1000 max = 2000 } }
		if = { limit = { has_country_flag = underworld_smuggler_minerals_4 } remove_country_flag = underworld_smuggler_minerals_4 add_monthly_resource_mult = { resource = minerals value = 8 min = 2500 max = 4000 } }
		if = { limit = { has_country_flag = underworld_smuggler_minerals_5 } remove_country_flag = underworld_smuggler_minerals_5 add_monthly_resource_mult = { resource = minerals value = 10 min = 6000 max = 10000 } }
		if = { limit = { has_country_flag = underworld_smuggler_alloys_1 } remove_country_flag = underworld_smuggler_alloys_1 add_monthly_resource_mult = { resource = alloys value = 2 min = 10 max = 25 } }
		if = { limit = { has_country_flag = underworld_smuggler_alloys_2 } remove_country_flag = underworld_smuggler_alloys_2 add_monthly_resource_mult = { resource = alloys value = 4 min = 50 max = 250 } }
		if = { limit = { has_country_flag = underworld_smuggler_alloys_3 } remove_country_flag = underworld_smuggler_alloys_3 add_monthly_resource_mult = { resource = alloys value = 6 min = 500 max = 1000 } }
		if = { limit = { has_country_flag = underworld_smuggler_alloys_4 } remove_country_flag = underworld_smuggler_alloys_4 add_monthly_resource_mult = { resource = alloys value = 8 min = 1250 max = 2000 } }
		if = { limit = { has_country_flag = underworld_smuggler_alloys_5 } remove_country_flag = underworld_smuggler_alloys_5 add_monthly_resource_mult = { resource = alloys value = 10 min = 3000 max = 5000 } }
		if = { limit = { has_country_flag = underworld_smuggler_consumers_1 } remove_country_flag = underworld_smuggler_consumers_1 add_monthly_resource_mult = { resource = consumer_goods value = 2 min = 10 max = 25 } }
		if = { limit = { has_country_flag = underworld_smuggler_consumers_2 } remove_country_flag = underworld_smuggler_consumers_2 add_monthly_resource_mult = { resource = consumer_goods value = 4 min = 50 max = 250 } }
		if = { limit = { has_country_flag = underworld_smuggler_consumers_3 } remove_country_flag = underworld_smuggler_consumers_3 add_monthly_resource_mult = { resource = consumer_goods value = 6 min = 500 max = 1000 } }
		if = { limit = { has_country_flag = underworld_smuggler_consumers_4 } remove_country_flag = underworld_smuggler_consumers_4 add_monthly_resource_mult = { resource = consumer_goods value = 8 min = 1250 max = 2000 } }
		if = { limit = { has_country_flag = underworld_smuggler_consumers_5 } remove_country_flag = underworld_smuggler_consumers_5 add_monthly_resource_mult = { resource = consumer_goods value = 10 min = 3000 max = 5000 } }
	}
}

country_event = {
	id = UniqueAscensionPerksEvents.375
	title = "UniqueAscensionPerksEvents.375.Name"
	desc = "UniqueAscensionPerksEvents.375.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	option = {
		name = "UniqueAscensionPerksEvents.375.a"
		allow = { resource_stockpile_compare = { resource = treasures value > 300 } NOT = { has_modifier = underworld_crime_contract } }
		add_resource = { treasures = -300 }
		add_modifier = { modifier = underworld_crime_contract years = 10 }
		is_dialog_only = yes
		response_text = "UniqueAscensionPerksEvents.375.Contract"
	}
	option = { name = "UniqueAscensionPerksEvents.375.b" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.376 } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}

country_event = {
	id = UniqueAscensionPerksEvents.376
	title = "UniqueAscensionPerksEvents.377.Name"
	desc = "UniqueAscensionPerksEvents.376.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	immediate = {
		random_country = { limit = { can_crime_attack = yes NOT = { is_same_empire = root } }
			save_event_target_as = country_1
			random_country = { limit = { can_crime_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 } }
				save_event_target_as = country_2
				random_country = { limit = { can_crime_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 } }
					save_event_target_as = country_3
					random_country = { limit = { can_crime_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 } }
						save_event_target_as = country_4
						random_country = { limit = { can_crime_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 is_same_empire = event_target:country_4 } }
							save_event_target_as = country_5
							random_country = { limit = { can_crime_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 is_same_empire = event_target:country_4 is_same_empire = event_target:country_5 } } save_event_target_as = country_6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.1"
		trigger = { exists = event_target:country_1 }
		hidden_effect = { event_target:country_1 = { save_event_target_as = CountryCrimeTarget } country_event = { id = UniqueAscensionPerksEvents.377 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.2"
		trigger = { exists = event_target:country_2 }
		hidden_effect = { event_target:country_2 = { save_event_target_as = CountryCrimeTarget } country_event = { id = UniqueAscensionPerksEvents.377 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.3"
		trigger = { exists = event_target:country_3 }
		hidden_effect = { event_target:country_3 = { save_event_target_as = CountryCrimeTarget } country_event = { id = UniqueAscensionPerksEvents.377 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.4"
		trigger = { exists = event_target:country_4 }
		hidden_effect = { event_target:country_4 = { save_event_target_as = CountryCrimeTarget } country_event = { id = UniqueAscensionPerksEvents.377 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.5"
		trigger = { exists = event_target:country_5 }
		hidden_effect = { event_target:country_5 = { save_event_target_as = CountryCrimeTarget } country_event = { id = UniqueAscensionPerksEvents.377 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.6"
		trigger = { exists = event_target:country_6 }
		hidden_effect = { event_target:country_6 = { save_event_target_as = CountryCrimeTarget } country_event = { id = UniqueAscensionPerksEvents.377 } }
	}
	option = { name = "UniqueAscensionPerks.select_country" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.376 } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } default_hide_option = yes }
}

# From = event_target:CountryCrimeTarget
country_event = {
	id = UniqueAscensionPerksEvents.377
	title = "UniqueAscensionPerksEvents.377.Name"
	desc = "UniqueAscensionPerksEvents.377.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	location = from
	immediate = {
		from = { random_owned_planet = { limit = { can_planet_crime_attack = yes }
			save_event_target_as = planet_1
			root.from = { random_owned_planet = { limit = { can_planet_crime_attack = yes NOT = { is_same_value = event_target:planet_1 } }
				save_event_target_as = planet_2
				root.from = { random_owned_planet = { limit = { can_planet_crime_attack = yes NOR = { is_same_value = event_target:planet_1 is_same_value = event_target:planet_2 } }
					save_event_target_as = planet_3
					root.from = { random_owned_planet = { limit = { can_planet_crime_attack = yes NOR = { is_same_value = event_target:planet_1 is_same_value = event_target:planet_2 is_same_value = event_target:planet_3 } }
						save_event_target_as = planet_4
						root.from = { random_owned_planet = { limit = { can_planet_crime_attack = yes NOR = { is_same_value = event_target:planet_1 is_same_value = event_target:planet_2 is_same_value = event_target:planet_3 is_same_value = event_target:planet_4 } }
							save_event_target_as = planet_5
							root.from = { random_owned_planet = { limit = { can_planet_crime_attack = yes NOR = { is_same_value = event_target:planet_1 is_same_value = event_target:planet_2 is_same_value = event_target:planet_3 is_same_value = event_target:planet_4 is_same_value = event_target:planet_5 } } save_event_target_as = planet_6 } }
						} }
					} }
				} }
			} }
		} }
	}
	option = {
		name = "UniqueAscensionPerksEvents.388.Planet.1"
		trigger = { exists = event_target:planet_1 }
		allow = { resource_stockpile_compare = { resource = treasures value > 400 } }
		add_resource = { treasures = -400 }
		hidden_effect = { event_target:planet_1 = { planet_event = { id = UniqueAscensionPerksEvents.378 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.388.Planet.2"
		trigger = { exists = event_target:planet_2 }
		allow = { resource_stockpile_compare = { resource = treasures value > 400 } }
		add_resource = { treasures = -400 }
		hidden_effect = { event_target:planet_2 = { planet_event = { id = UniqueAscensionPerksEvents.378 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.388.Planet.3"
		trigger = { exists = event_target:planet_3 }
		allow = { resource_stockpile_compare = { resource = treasures value > 400 } }
		add_resource = { treasures = -400 }
		hidden_effect = { event_target:planet_3 = { planet_event = { id = UniqueAscensionPerksEvents.378 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.388.Planet.4"
		trigger = { exists = event_target:planet_4 }
		allow = { resource_stockpile_compare = { resource = treasures value > 400 } }
		add_resource = { treasures = -400 }
		hidden_effect = { event_target:planet_4 = { planet_event = { id = UniqueAscensionPerksEvents.378 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.388.Planet.5"
		trigger = { exists = event_target:planet_5 }
		allow = { resource_stockpile_compare = { resource = treasures value > 400 } }
		add_resource = { treasures = -400 }
		hidden_effect = { event_target:planet_5 = { planet_event = { id = UniqueAscensionPerksEvents.378 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.388.Planet.6"
		trigger = { exists = event_target:planet_6 }
		allow = { resource_stockpile_compare = { resource = treasures value > 400 } }
		add_resource = { treasures = -400 }
		hidden_effect = { event_target:planet_6 = { planet_event = { id = UniqueAscensionPerksEvents.378 } } }
	}
	option = { name = "UniqueAscensionPerks.select_planet" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.377 } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } default_hide_option = yes }
}

# This = PlanetCrimeTarget
planet_event = {
	id = UniqueAscensionPerksEvents.378
	title = "UniqueAscensionPerksEvents.377.Name"
	desc = "UniqueAscensionPerksEvents.378.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = from room = underworld_room }
	location = root
	is_triggered_only = yes
	option = { name = EXCELLENT add_modifier = { modifier = underworld_crime_attack years = 20 } }
}

country_event = {
	id = UniqueAscensionPerksEvents.379
	title = "UniqueAscensionPerksEvents.380.Name"
	desc = "UniqueAscensionPerksEvents.379.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	option = {
		name = "UniqueAscensionPerksEvents.375.a"
		allow = { resource_stockpile_compare = { resource = treasures value > 300 } NOT = { has_modifier = underworld_pirates_contract } }
		add_resource = { treasures = -300 }
		add_modifier = { modifier = underworld_pirates_contract years = 10 }
		is_dialog_only = yes
		response_text = "UniqueAscensionPerksEvents.379.Contract"
	}
	option = { name = "UniqueAscensionPerksEvents.375.b" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.380 } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}

country_event = {
	id = UniqueAscensionPerksEvents.380
	title = "UniqueAscensionPerksEvents.380.Name"
	desc = "UniqueAscensionPerksEvents.380.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	immediate = {
		random_country = { limit = { can_pirate_attack = yes NOT = { is_same_value = root } } save_event_target_as = country_1 }
		random_country = { limit = { can_pirate_attack = yes NOR = { is_same_value = root is_same_value = event_target:country_1 } } save_event_target_as = country_2 }
		random_country = { limit = { can_pirate_attack = yes NOR = { is_same_value = root is_same_value = event_target:country_1 is_same_value = event_target:country_2 } } save_event_target_as = country_3 }
		random_country = { limit = { can_pirate_attack = yes NOR = { is_same_value = root is_same_value = event_target:country_1 is_same_value = event_target:country_2 is_same_value = event_target:country_3 } } save_event_target_as = country_4 }
		random_country = { limit = { can_pirate_attack = yes NOR = { is_same_value = root is_same_value = event_target:country_1 is_same_value = event_target:country_2 is_same_value = event_target:country_3 is_same_value = event_target:country_4 } } save_event_target_as = country_5 }
		random_country = { limit = { can_pirate_attack = yes NOR = { is_same_value = root is_same_value = event_target:country_1 is_same_value = event_target:country_2 is_same_value = event_target:country_3 is_same_value = event_target:country_4 is_same_value = event_target:country_5 } } save_event_target_as = country_6 }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.1"
		trigger = { exists = event_target:country_1 }
		allow = { resource_stockpile_compare = { resource = treasures value > 750 } }
		add_resource = { treasures = -750 }
		hidden_effect = { event_target:country_1 = { save_event_target_as = CountryPirateTarget } country_event = { id = UniqueAscensionPerksEvents.381 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.2"
		trigger = { exists = event_target:country_2 }
		allow = { resource_stockpile_compare = { resource = treasures value > 750 } }
		add_resource = { treasures = -750 }
		hidden_effect = { event_target:country_2 = { save_event_target_as = CountryPirateTarget } country_event = { id = UniqueAscensionPerksEvents.381 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.3"
		trigger = { exists = event_target:country_3 }
		allow = { resource_stockpile_compare = { resource = treasures value > 750 } }
		add_resource = { treasures = -750 }
		hidden_effect = { event_target:country_3 = { save_event_target_as = CountryPirateTarget } country_event = { id = UniqueAscensionPerksEvents.381 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.4"
		trigger = { exists = event_target:country_4 }
		allow = { resource_stockpile_compare = { resource = treasures value > 750 } }
		add_resource = { treasures = -750 }
		hidden_effect = { event_target:country_4 = { save_event_target_as = CountryPirateTarget } country_event = { id = UniqueAscensionPerksEvents.381 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.5"
		trigger = { exists = event_target:country_5 }
		allow = { resource_stockpile_compare = { resource = treasures value > 750 } }
		add_resource = { treasures = -750 }
		hidden_effect = { event_target:country_5 = { save_event_target_as = CountryPirateTarget } country_event = { id = UniqueAscensionPerksEvents.381 } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.6"
		trigger = { exists = event_target:country_6 }
		allow = { resource_stockpile_compare = { resource = treasures value > 750 } }
		add_resource = { treasures = -750 }
		hidden_effect = { event_target:country_6 = { save_event_target_as = CountryPirateTarget } country_event = { id = UniqueAscensionPerksEvents.381 } }
	}
	option = { name = "UniqueAscensionPerks.select_country" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.380 } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } default_hide_option = yes }
}

country_event = {
	id = UniqueAscensionPerksEvents.381
	title = "UniqueAscensionPerksEvents.380.Name"
	desc = "UniqueAscensionPerksEvents.381.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	immediate = {
		event_target:CountryPirateTarget = {
			set_timed_country_flag = { flag = underworld_pirates_cooldown years = 4 }
			country_event = { id = UniqueAscensionPerksEvents.382 days = 5 random = 5 }
			country_event = { id = UniqueAscensionPerksEvents.382 days = 10 random = 10 }
			country_event = { id = UniqueAscensionPerksEvents.382 days = 20 random = 20 }
			random = { chance = 50 country_event = { id = UniqueAscensionPerksEvents.382 days = 30 random = 30 } }
			random = { chance = 50 country_event = { id = UniqueAscensionPerksEvents.382 days = 40 random = 40 } }
			random = { chance = 50 country_event = { id = UniqueAscensionPerksEvents.382 days = 50 random = 50 } }
		}
	}
	option = { name = EXCELLENT }
}

country_event = {
	id = UniqueAscensionPerksEvents.382
	title = "pirate.54.name"
	desc = pirate.54.desc
	picture = GFX_evt_pirates_attacking_cargo
	show_sound = event_ship_bridge
	location = event_target:pirate_system
	is_triggered_only = yes
	immediate = {
		random_system_within_border = {
			limit = { NOT = { has_star_flag = underworld_pirates_cooldown } }
			set_timed_star_flag = { flag = underworld_pirates_cooldown years = 1 }
			save_event_target_as = pirate_system
		}
		get_capital_planet = yes
		event_target:capital_planet.solar_system = { save_event_target_as = capital_system }
		owner_species = { save_event_target_as = owner_species }
		create_normal_pirate_country = yes
		create_pirate_fleet = yes
	}
	option = { name = pirate.50.a }
}

country_event = {
	id = UniqueAscensionPerksEvents.383
	title = "UniqueAscensionPerksEvents.383.Name"
	desc = "UniqueAscensionPerksEvents.383.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = underworld_room }
	is_triggered_only = yes
	immediate = {
		random_country = { limit = { can_marauder_contact = yes }
			save_event_target_as = country_1
			random_country = { limit = { can_marauder_contact = yes NOT = { is_same_empire = event_target:country_1 } }
				save_event_target_as = country_2
				random_country = { limit = { can_marauder_contact = yes NOR = { is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 } }
					save_event_target_as = country_3
					random_country = { limit = { can_marauder_contact = yes NOR = { is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 } }
						save_event_target_as = country_4
						random_country = { limit = { can_marauder_contact = yes NOR = { is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 is_same_empire = event_target:country_4 } }
							save_event_target_as = country_5
							random_country = { limit = { can_marauder_contact = yes NOR = { is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 is_same_empire = event_target:country_4 is_same_empire = event_target:country_5 } } save_event_target_as = country_6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.1"
		trigger = { exists = event_target:country_1 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.384 scopes = { from = event_target:country_1 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.2"
		trigger = { exists = event_target:country_2 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.384 scopes = { from = event_target:country_2 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.3"
		trigger = { exists = event_target:country_3 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.384 scopes = { from = event_target:country_3 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.4"
		trigger = { exists = event_target:country_4 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.384 scopes = { from = event_target:country_4 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.5"
		trigger = { exists = event_target:country_5 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.384 scopes = { from = event_target:country_5 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.6"
		trigger = { exists = event_target:country_6 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.384 scopes = { from = event_target:country_6 } } }
	}
	option = { name = "UniqueAscensionPerks.select_country" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.383 } } }
	option = { name = BACK ai_chance = { factor = 0.1 } hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}
# From = MarauderContact
country_event = {
	id = UniqueAscensionPerksEvents.384
	title = "UniqueAscensionPerksEvents.383.Name"
	desc = "UniqueAscensionPerksEvents.384.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = from room = underworld_room }
	is_triggered_only = yes
	immediate = {
		from = {
			save_event_target_as = marauder_country
			owner_species = { save_event_target_as = marauder_species }
			random_country = {
				limit = { is_country_type = marauder_raiders from = { has_country_flag = parent_of@prev } }
				save_event_target_as = marauder_raiding_country
			}
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.375.a"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.384.Req01 has_country_flag = raid_target_of@event_target:marauder_country has_country_flag = under_marauder_attack }
			resource_stockpile_compare = { resource = treasures value > 200 }
		}
		add_resource = { treasures = -200 }
		custom_tooltip = "UniqueAscensionPerksEvents.384.a.tooltip"
		# underworld_marauder_stop_raid = yes
		hidden_effect = {
			remove_country_flag = raid_target_of@event_target:marauder_country
			remove_country_flag = under_marauder_attack
			remove_relation_flag = { who = event_target:marauder_country flag = current_target }
			event_target:marauder_country = {
				remove_country_flag = raid_ongoing
				set_timed_country_flag = { flag = raid_cooldown days = @raidcooldown }
			}
			event_target:marauder_raiding_country = {
				random_owned_fleet = {
					limit = { has_fleet_flag = raiding_fleet }
					delete_fleet = this
				}
				destroy_country = yes
			}
		}
		is_dialog_only = yes
		response_text = "UniqueAscensionPerksEvents.375.Contract" # TODO
	}
	option = { name = "UniqueAscensionPerksEvents.375.b" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.385 scopes = { from = from } } }
	}
	option = { name = GOODBYE ai_chance = { factor = 0.1 } default_hide_option = yes }
}

# From = MarauderContact
country_event = {
	id = UniqueAscensionPerksEvents.385
	title = "UniqueAscensionPerksEvents.383.Name"
	desc = "UniqueAscensionPerksEvents.385.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = from room = underworld_room }
	is_triggered_only = yes
	immediate = {
		random_country = { limit = { can_marauder_attack = yes NOT = { is_same_empire = root } }
			save_event_target_as = countr_1
			random_country = { limit = { can_marauder_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:countr_1 } }
				save_event_target_as = countr_2
				random_country = { limit = { can_marauder_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:countr_1 is_same_empire = event_target:countr_2 } }
					save_event_target_as = countr_3
					random_country = { limit = { can_marauder_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:countr_1 is_same_empire = event_target:countr_2 is_same_empire = event_target:countr_3 } }
						save_event_target_as = countr_4
						random_country = { limit = { can_marauder_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:countr_1 is_same_empire = event_target:countr_2 is_same_empire = event_target:countr_3 is_same_empire = event_target:countr_4 } }
							save_event_target_as = countr_5
							random_country = { limit = { can_marauder_attack = yes NOR = { is_same_empire = root is_same_empire = event_target:countr_1 is_same_empire = event_target:countr_2 is_same_empire = event_target:countr_3 is_same_empire = event_target:countr_4 is_same_empire = event_target:countr_5 } } save_event_target_as = countr_6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = UniqueAscensionPerksEvents.385.Country.1
		trigger = { exists = event_target:countr_1 }
		allow = { resource_stockpile_compare = { resource = treasures value > 1000 } }
		add_resource = { treasures = -1000 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.386 scopes = { from = from fromfrom = event_target:country_1 } } }
	}
	option = {
		name = UniqueAscensionPerksEvents.385.Country.2
		trigger = { exists = event_target:countr_2 }
		allow = { resource_stockpile_compare = { resource = treasures value > 1000 } }
		add_resource = { treasures = -1000 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.386 scopes = { from = from fromfrom = event_target:country_2 } } }
	}
	option = {
		name = UniqueAscensionPerksEvents.385.Country.3
		trigger = { exists = event_target:countr_3 }
		allow = { resource_stockpile_compare = { resource = treasures value > 1000 } }
		add_resource = { treasures = -1000 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.386 scopes = { from = from fromfrom = event_target:country_3 } } }
	}
	option = {
		name = UniqueAscensionPerksEvents.385.Country.4
		trigger = { exists = event_target:countr_4 }
		allow = { resource_stockpile_compare = { resource = treasures value > 1000 } }
		add_resource = { treasures = -1000 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.386 scopes = { from = from fromfrom = event_target:country_4 } } }
	}
	option = {
		name = UniqueAscensionPerksEvents.385.Country.5
		trigger = { exists = event_target:countr_5 }
		allow = { resource_stockpile_compare = { resource = treasures value > 1000 } }
		add_resource = { treasures = -1000 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.386 scopes = { from = from fromfrom = event_target:country_5 } } }
	}
	option = {
		name = UniqueAscensionPerksEvents.385.Country.6
		trigger = { exists = event_target:countr_6 }
		allow = { resource_stockpile_compare = { resource = treasures value > 1000 } }
		add_resource = { treasures = -1000 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.386 scopes = { from = from fromfrom = event_target:country_6 } } }
	}
	option = { name = "UniqueAscensionPerks.select_country" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.385 scopes = { from = from } } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } default_hide_option = yes }
}

# From = MarauderContact
# fromfrom = CountryMarauderTarget
country_event = {
	id = UniqueAscensionPerksEvents.386
	title = "UniqueAscensionPerksEvents.383.Name"
	desc = "UniqueAscensionPerksEvents.386.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = fromfrom room = underworld_room }
	is_triggered_only = yes
	immediate = {
		# underworld_marauder_begin_raid = yes
		from = {
			save_event_target_as = raiding_marauder
			species = { save_event_target_as = marauder_species }
		}
	}
	option = { name = EXCELLENT
		hidden_effect = { fromfrom = { country_event = { id = UniqueAscensionPerksEvents.387 days = 1 scopes = { from = root.from } } } }
	}
}

# From = MarauderContact = raiding_marauder
# This = CountryMarauderTarget
country_event = {
	id = UniqueAscensionPerksEvents.387 # (parts marauder.33)
	title = "UniqueAscensionPerksEvents.383.Name"
	desc = "UniqueAscensionPerksEvents.387.Desc"
	diplomatic = yes
	picture_event_data = { portrait = event_target:raiding_marauder room = underworld_room }
	is_triggered_only = yes
	immediate = {
		# underworld_marauder_raid = yes
		# set_timed_country_flag = { flag = recently_raided_or_threatened years = 5 }
		set_country_flag = raid_target_of@event_target:raiding_marauder
		set_country_flag = under_marauder_attack
		if = { limit = { event_target:raiding_marauder = { has_country_flag = marauder_1 } }
			random_system = {
				limit = { has_star_flag = marauder_capital_1 }
				save_event_target_as = marauder_system
				random_system_planet = { limit = { has_planet_flag = raid_source } save_event_target_as = raid_source }
			}
		}
		if = { limit = { event_target:raiding_marauder = { has_country_flag = marauder_2 } }
			random_system = {
				limit = { has_star_flag = marauder_capital_2 }
				save_event_target_as = marauder_system
				random_system_planet = { limit = { has_planet_flag = raid_source } save_event_target_as = raid_source }
			}
		}
		if = { limit = { event_target:raiding_marauder = { has_country_flag = marauder_3 } }
			random_system = {
				limit = { has_star_flag = marauder_capital_3 }
				save_event_target_as = marauder_system
				random_system_planet = { limit = { has_planet_flag = raid_source } save_event_target_as = raid_source }
			}
		}
		set_relation_flag = { who = event_target:raiding_marauder flag = current_target }
		save_event_target_as = marauder_target
		event_target:raiding_marauder = { set_country_flag = raid_ongoing owner_species = { save_event_target_as = marauder_species } }
		create_country = {
			name = event_target:raiding_marauder
			type = "marauder_raiders"
			species = event_target:marauder_species
			flag = event_target:raiding_marauder
			effect = {
				save_event_target_as = marauder_raiding_country
				event_target:raiding_marauder = {
					switch = { trigger = has_country_flag
						marauder_1 = { prev = { set_country_flag = marauder_1 } }
						marauder_2 = { prev = { set_country_flag = marauder_2 } }
						marauder_3 = { prev = { set_country_flag = marauder_3 } }
					}
				}
				set_country_flag = raid_ongoing
			}
		}
		event_target:marauder_raiding_country = {
			every_country = { establish_communications_no_message = event_target:marauder_raiding_country }
			event_target:raiding_marauder = {
				set_country_flag = parent_of@event_target:marauder_raiding_country
				set_faction_hostility = { target = event_target:marauder_raiding_country set_hostile = no set_neutral = no set_friendly = yes }
			}
			create_leader = {
				class = admiral
				species = event_target:marauder_species
				name = random
				skill = 3
				leader_age_min = 25
				leader_age_max = 45
				traits = { 0 = leader_trait_mercenary_warrior }
			}
			create_fleet = {
				name = "NAME_Raiding_Fleet"
				effect = {
					set_owner = event_target:raiding_marauder # For ship names
					create_marauder_raiders = yes
					set_location = event_target:raid_source
					set_fleet_stance = aggressive
					set_fleet_bombardment_stance = indiscriminate
					set_aggro_range_measure_from = self
					set_aggro_range = 150
					set_fleet_flag = raiding_fleet
					assign_leader = last_created_leader
				}
			}
			last_created_fleet = {
				set_owner = prev # Real owner
				random_system = {
					limit = {
						exists = space_owner
						is_owned_by = root
						any_system_colony = { is_owned_by = root num_pops > 0 }
						prev = { can_access_system = prev }
					}
					save_event_target_as = raid_system
					random_system_colony = {
						limit = { is_owned_by = root num_pops > 0 }
						save_event_target_as = raid_planet
					}
				}
				if = {
					limit = {
						exists = event_target:raid_planet
						can_access_system = event_target:raid_planet.solar_system
					}
					auto_move_to_planet = { target = event_target:raid_planet clear_auto_move_on_arrival = no }
				} else_if = { # compat. fallback
					limit = {
						OR = {
							has_global_flag = gf_great_khan_active
							has_global_flag = pirate_waves_active
							AND = {
								years_passed > 10
								any_playable_country = { is_ai = no is_variable_set = pirate_waves_chance }
							}
						}
					}
					fleet_event = { id = marauder.29 scopes = { from = event_target:marauder_target } }
				} else = { log="FAIL: Marauder raiding fleet can't access raid target." }
			}
			set_faction_hostility = { target = event_target:marauder_target set_hostile = yes set_neutral = no set_friendly = no }
		}
	}
	option = { name = BATTLESTATIONS }
}

country_event = {
	id = UniqueAscensionPerksEvents.388
	title = "UniqueAscensionPerksEvents.388.Name"
	desc = "UniqueAscensionPerksEvents.388.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	is_triggered_only = yes
	picture_event_data = { portrait = root room = underworld_room }
	immediate = {
		random_owned_planet = { limit = { is_colony = yes }
			save_event_target_as = planet_1
			root = { random_owned_planet = { limit = { is_colony = yes NOT = { is_same_value = event_target:planet_1 } }
				save_event_target_as = planet_2
				root = { random_owned_planet = { limit = { is_colony = yes NOR = { is_same_value = event_target:planet_1 is_same_value = event_target:planet_2 } }
					save_event_target_as = planet_3
					root = { random_owned_planet = { limit = { is_colony = yes NOR = { is_same_value = event_target:planet_1 is_same_value = event_target:planet_2 is_same_value = event_target:planet_3 } }
						save_event_target_as = planet_4
						root = { random_owned_planet = { limit = { is_colony = yes NOR = { is_same_value = event_target:planet_1 is_same_value = event_target:planet_2 is_same_value = event_target:planet_3 is_same_value = event_target:planet_4 } }
							save_event_target_as = planet_5
							root = { random_owned_planet = { limit = { is_colony = yes NOR = { is_same_value = event_target:planet_1 is_same_value = event_target:planet_2 is_same_value = event_target:planet_3 is_same_value = event_target:planet_4 is_same_value = event_target:planet_5 } } save_event_target_as = planet_6 } }
						} }
					} }
				} }
			} }
		}
	}
	option = { name = "UniqueAscensionPerksEvents.388.Planet.1" trigger = { exists = event_target:planet_1 } hidden_effect = { event_target:planet_1 = { planet_event = { id = UniqueAscensionPerksEvents.389 } } } }
	option = { name = "UniqueAscensionPerksEvents.388.Planet.2" trigger = { exists = event_target:planet_2 } hidden_effect = { event_target:planet_2 = { planet_event = { id = UniqueAscensionPerksEvents.389 } } } }
	option = { name = "UniqueAscensionPerksEvents.388.Planet.3" trigger = { exists = event_target:planet_3 } hidden_effect = { event_target:planet_3 = { planet_event = { id = UniqueAscensionPerksEvents.389 } } } }
	option = { name = "UniqueAscensionPerksEvents.388.Planet.4" trigger = { exists = event_target:planet_4 } hidden_effect = { event_target:planet_4 = { planet_event = { id = UniqueAscensionPerksEvents.389 } } } }
	option = { name = "UniqueAscensionPerksEvents.388.Planet.5" trigger = { exists = event_target:planet_5 } hidden_effect = { event_target:planet_5 = { planet_event = { id = UniqueAscensionPerksEvents.389 } } } }
	option = { name = "UniqueAscensionPerksEvents.388.Planet.6" trigger = { exists = event_target:planet_6 } hidden_effect = { event_target:planet_6 = { planet_event = { id = UniqueAscensionPerksEvents.389 } } } }
	option = { name = "UniqueAscensionPerks.select_planet" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.388 } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } default_hide_option = yes }
}

# From = planet_owner
planet_event = {
	id = UniqueAscensionPerksEvents.389
	title = "UniqueAscensionPerksEvents.388.Name"
	desc = "UniqueAscensionPerksEvents.389.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	is_triggered_only = yes
	picture_event_data = { portrait = from room = underworld_room }
	location = root
	pre_triggers = { has_owner = yes }
	after = {
		from = {
			if = { limit = { is_variable_set = create_underworld_slave }
				while = { count = create_underworld_slave
					random_playable_country = { limit = { NOT = { is_same_empire = prev } is_gestalt = no }
						root = {
							create_pop = { species = prev.species }
							last_created_pop = { set_citizenship_type = { type = citizenship_slavery cooldown = no } }
						}
					}
				}
			}
			clear_variable = create_underworld_slave
		}
	}
	option = { name = "UniqueAscensionPerksEvents.98.5" allow = { from = { resource_stockpile_compare = { resource = treasures value > 250 } } } from = { add_resource = { treasures = -250 } set_variable = { which = create_underworld_slave value = 5 } hidden_effect = { set_timed_country_flag = { flag = underworld_slaves_cooldown years = 1 } country_event = { id = UniqueAscensionPerksEvents.391 days = 360 } country_event = { id = UniqueAscensionPerksEvents.390 } } } }
	option = { name = "UniqueAscensionPerksEvents.98.10" allow = { from = { resource_stockpile_compare = { resource = treasures value > 500 } } } from = { add_resource = { treasures = -500 } set_variable = { which = create_underworld_slave value = 10 } hidden_effect = { set_timed_country_flag = { flag = underworld_slaves_cooldown years = 2 } country_event = { id = UniqueAscensionPerksEvents.391 days = 720 } country_event = { id = UniqueAscensionPerksEvents.390 } } } }
	option = { name = "UniqueAscensionPerksEvents.98.20" allow = { from = { resource_stockpile_compare = { resource = treasures value > 1000 } } } from = { add_resource = { treasures = -1000 } set_variable = { which = create_underworld_slave value = 20 } hidden_effect = { set_timed_country_flag = { flag = underworld_slaves_cooldown years = 4 } country_event = { id = UniqueAscensionPerksEvents.391 days = 1440 } country_event = { id = UniqueAscensionPerksEvents.390 } } } }
	option = { name = "UniqueAscensionPerksEvents.98.40" allow = { from = { resource_stockpile_compare = { resource = treasures value > 2000 } } } from = { add_resource = { treasures = -2000 } set_variable = { which = create_underworld_slave value = 40 } hidden_effect = { set_timed_country_flag = { flag = underworld_slaves_cooldown years = 8 } country_event = { id = UniqueAscensionPerksEvents.391 days = 2880 } country_event = { id = UniqueAscensionPerksEvents.390 } } } }
	option = { name = GOODBYE ai_chance = { factor = 0.1 } hidden_effect = { from = { clear_variable = create_underworld_slave } } }
}

country_event = {
	id = UniqueAscensionPerksEvents.390
	title = "UniqueAscensionPerksEvents.388.Name"
	desc = "UniqueAscensionPerksEvents.390.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	location = from
	is_triggered_only = yes
	option = { name = EXCELLENT hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}

country_event = {
	id = UniqueAscensionPerksEvents.391
	title = "UniqueAscensionPerksEvents.388.Name"
	desc = "UniqueAscensionPerksEvents.391.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = root room = underworld_room }
	is_triggered_only = yes
	option = { name = EXCELLENT }
}

country_event = {
	id = UniqueAscensionPerksEvents.392
	title = "UniqueAscensionPerksEvents.393.Name"
	desc = "UniqueAscensionPerksEvents.392.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { room = underworld_room }
	is_triggered_only = yes
	immediate = {
		random_country = { limit = { can_fallen_empire_contact = yes NOT = { is_same_empire = root } }
			save_event_target_as = country_1
			random_country = { limit = { can_fallen_empire_contact = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 } }
				save_event_target_as = country_2
				random_country = { limit = { can_fallen_empire_contact = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 } }
					save_event_target_as = country_3
					random_country = { limit = { can_fallen_empire_contact = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 } }
						save_event_target_as = country_4
						random_country = { limit = { can_fallen_empire_contact = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 is_same_empire = event_target:country_4 } }
							save_event_target_as = country_5
							random_country = { limit = { can_fallen_empire_contact = yes NOR = { is_same_empire = root is_same_empire = event_target:country_1 is_same_empire = event_target:country_2 is_same_empire = event_target:country_3 is_same_empire = event_target:country_4 is_same_empire = event_target:country_5 } } save_event_target_as = country_6 }
						}
					}
				}
			}
		}
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.1"
		trigger = { exists = event_target:country_1 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.393 scopes = { from = event_target:country_1 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.2"
		trigger = { exists = event_target:country_2 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.393 scopes = { from = event_target:country_2 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.3"
		trigger = { exists = event_target:country_3 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.393 scopes = { from = event_target:country_3 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.4"
		trigger = { exists = event_target:country_4 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.393 scopes = { from = event_target:country_4 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.5"
		trigger = { exists = event_target:country_5 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.393 scopes = { from = event_target:country_5 } } }
	}
	option = {
		name = "UniqueAscensionPerksEvents.206.Country.6"
		trigger = { exists = event_target:country_6 }
		hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.393 scopes = { from = event_target:country_6 } } }
	}
	option = { name = "UniqueAscensionPerks.select_country" hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.392 } } }
	option = { name = BACK ai_chance = { factor = 0.1 } hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}

# from = FallenEmpireContact
country_event = {
	id = UniqueAscensionPerksEvents.393
	title = "UniqueAscensionPerksEvents.393.Name"
	desc = "UniqueAscensionPerksEvents.393.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = from room = underworld_room }
	is_triggered_only = yes
	trigger = {
		NOT = { has_country_flag = FallenEmpireContact }
	}
	immediate = { set_country_flag = FallenEmpireContact }
	after = {
		if = { limit = { has_country_flag = FallenEmpireContact }
			# underworld_fallen_empire_notice_transaction = yes
			hidden_effect = {
				set_timed_country_flag = { flag = underworld_fallen_empire_cooldown years = 5 }
				country_event = { id = UniqueAscensionPerksEvents.394 days = 1800 scopes = { from = from } }
				random = { chance = 50
					country_event = { id = UniqueAscensionPerksEvents.395 days = 30 random = 180 scopes = { from = from } }
				}
			}
		}
		remove_country_flag = FallenEmpireContact
	}
	option = {
		name = "UniqueAscensionPerksEvents.393.PowerCore"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.393.Req01 NOT = { has_country_flag = underworld_fallen_empire_cooldown } }
			resource_stockpile_compare = { resource = treasures value > 7500 }
			has_technology = tech_zero_point_power NOR = { has_technology = tech_dark_matter_power_core has_tech_option = tech_dark_matter_power_core }
		}
		add_resource = { treasures = -7500 }
		add_research_option = tech_dark_matter_power_core
		is_dialog_only = yes
		response_text = "UniqueAscensionPerksEvents.393.Transaction"
	}
	option = {
		name = "DARK_MATTER_DEFLECTOR"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.393.Req01 NOT = { has_country_flag = underworld_fallen_empire_cooldown } }
			resource_stockpile_compare = { resource = treasures value > 7500 }
			has_technology = tech_shields_5 NOR = { has_technology = tech_dark_matter_deflector has_tech_option = tech_dark_matter_deflector }
		}
		add_resource = { treasures = -7500 }
		add_research_option = tech_dark_matter_deflector
		is_dialog_only = yes
		response_text = "UniqueAscensionPerksEvents.393.Transaction"
	}
	option = {
		name = "SHIP_THRUSTER_5"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.393.Req01 NOT = { has_country_flag = underworld_fallen_empire_cooldown } }
			resource_stockpile_compare = { resource = treasures value > 7500 }
			has_technology = tech_thrusters_4 NOR = { has_technology = tech_dark_matter_propulsion has_tech_option = tech_dark_matter_propulsion }
		}
		add_resource = { treasures = -7500 }
		add_research_option = tech_dark_matter_propulsion
		is_dialog_only = yes
		response_text = "UniqueAscensionPerksEvents.393.Transaction"
	}
	option = {
		name = "UniqueAscensionPerksEvents.393.Titan"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.393.Req01 NOT = { has_country_flag = underworld_fallen_empire_cooldown } }
			resource_stockpile_compare = { resource = treasures value > 6000 }
			has_technology = tech_titans
		}
		add_resource = { treasures = -6000 }
		custom_tooltip = "UniqueAscensionPerksEvents.393.Titan.tooltip"

		is_dialog_only = yes
		# underworld_fallen_empire_titan = yes
		random_owned_planet = { limit = { is_capital = yes } save_event_target_as = spawn_location }
		create_fleet = {
			name = "Fallen Empire Stolen Fleet"
			effect = {
				set_owner = root
				if = { limit = { from = { has_ethic = ethic_fanatic_xenophile } } while = { count = 1 create_ship = { name = random design = "NAME_Keeper" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_xenophobe } } while = { count = 1 create_ship = { name = random design = "NAME_Imperium" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_materialist } } while = { count = 1 create_ship = { name = random design = "NAME_Savant" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_spiritualist } } while = { count = 1 create_ship = { name = random design = "NAME_Eternal" graphical_culture = from } } } else_if = { limit = { from = { is_machine_empire = yes } } while = { count = 1 create_ship = { name = random design = "NAME_Alpha" graphical_culture = from } } }
				set_location = { target = event_target:spawn_location distance = 50 angle = random }
			}
		}
		response_text = "UniqueAscensionPerksEvents.393.Transaction"
	}
	option = {
		name = "UniqueAscensionPerksEvents.393.Battlecruiser"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.393.Req01 NOT = { has_country_flag = underworld_fallen_empire_cooldown } }
			resource_stockpile_compare = { resource = treasures value > 5000 }
			has_technology = tech_battleships
		}
		add_resource = { treasures = -5000 }
		custom_tooltip = "UniqueAscensionPerksEvents.393.Battlecruiser.tooltip"

		is_dialog_only = yes
		# underworld_fallen_empire_battlecruisers = yes
		random_owned_planet = { limit = { is_capital = yes } save_event_target_as = spawn_location }
		create_fleet = {
			name = "Fallen Empire Stolen Fleet"
			effect = {
				set_owner = root
				if = { limit = { from = { has_ethic = ethic_fanatic_xenophile } } while = { count = 4 create_ship = { name = random design = "NAME_Custodian" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_xenophobe } } while = { count = 4 create_ship = { name = random design = "NAME_Supremacy" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_materialist } } while = { count = 4 create_ship = { name = random design = "NAME_Scholar" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_spiritualist } } while = { count = 4 create_ship = { name = random design = "NAME_Avatar" graphical_culture = from } } } else_if = { limit = { from = { is_machine_empire = yes } } while = { count = 4 create_ship = { name = random design = "NAME_Beta" graphical_culture = from } } }
				set_location = { target = event_target:spawn_location distance = 50 angle = random }
			}
		}
		response_text = "UniqueAscensionPerksEvents.393.Transaction"
	}
	option = {
		name = "UniqueAscensionPerksEvents.393.Escort"
		allow = {
			custom_tooltip = { fail_text = UniqueAscensionPerksEvents.393.Req01 NOT = { has_country_flag = underworld_fallen_empire_cooldown } }
			resource_stockpile_compare = { resource = treasures value > 3500 }
			has_technology = tech_destroyers
		}
		add_resource = { treasures = -3500 }
		custom_tooltip = "UniqueAscensionPerksEvents.393.Escort.tooltip"
		is_dialog_only = yes
		# underworld_fallen_empire_escort = yes
		random_owned_planet = { limit = { is_capital = yes } save_event_target_as = spawn_location }
		create_fleet = {
			name = "Fallen Empire Stolen Fleet"
			effect = {
				set_owner = root
				if = { limit = { from = { has_ethic = ethic_fanatic_xenophile } } while = { count = 8 create_ship = { name = random design = "NAME_Warden" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_xenophobe } } while = { count = 8 create_ship = { name = random design = "NAME_Glory" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_materialist } } while = { count = 8 create_ship = { name = random design = "NAME_Sage" graphical_culture = from } } } else_if = { limit = { from = { has_ethic = ethic_fanatic_spiritualist } } while = { count = 8 create_ship = { name = random design = "NAME_Zealot" graphical_culture = from } } } else_if = { limit = { from = { is_machine_empire = yes } } while = { count = 8 create_ship = { name = random design = "NAME_Gamma" graphical_culture = from } } }
				set_location = { target = event_target:spawn_location distance = 50 angle = random }
			}
		}
		response_text = "UniqueAscensionPerksEvents.393.Transaction"
	}
	option = {
		name = GOODBYE ai_chance = { factor = 0.1 } default_hide_option = yes
		hidden_effect = { remove_country_flag = FallenEmpireContact }
	}
}

# from = from
country_event = {
	id = UniqueAscensionPerksEvents.394
	title = "UniqueAscensionPerksEvents.393.Name"
	desc = "UniqueAscensionPerksEvents.394.Desc"
	show_sound = event_conversation
	diplomatic = yes
	force_open = yes
	picture_event_data = { portrait = from room = underworld_room }
	is_triggered_only = yes
	option = { name = EXCELLENT hidden_effect = { country_event = { id = UniqueAscensionPerksEvents.371 } } }
}

# from = from
country_event = {
	id = UniqueAscensionPerksEvents.395
	title = "UniqueAscensionPerksEvents.395.Name"
	desc = "UniqueAscensionPerksEvents.395.Desc"
	show_sound = event_conversation
	is_triggered_only = yes
	diplomatic = yes
	picture_event_data = {
		portrait = from
		planet_background = from
		graphical_culture = from
		city_level = from
		room = from.ruler
	}
	option = {
		name = "UniqueAscensionPerksEvents.395.a"
		allow = { resource_stockpile_compare = { resource = treasures value > 2000 } }
		add_resource = { treasures = -2000 }
	}
	option = {
		name = "UniqueAscensionPerksEvents.395.b"
		ai_chance = { factor = 0.1 } default_hide_option = yes
		if = { limit = { has_country_flag = fallen_empire_remnant_of@from }
			from = { add_opinion_modifier = { modifier = opinion_fallen_empire_remnant_contact_again who = root } }
		} else = {
			from = { add_opinion_modifier = { modifier = opinion_fallen_empire_remnant_contact who = root } }
		}
		set_timed_country_flag = { flag = fallen_empire_remnant_of@from years = 20 }
	}
}
